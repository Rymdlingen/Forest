importScripts('bridge.js', 'dotnetconsole.js', 'dotnetconsole.worker.js');
Bridge.assembly("Forest",function($asm,globals){"use strict";Bridge.define("Forest.Direction",{$kind:"enum",statics:{fields:{North:0,Northwest:1,West:2,Southwest:3,South:4,Southeast:5,East:6,Northeast:7,NoDirection:8}}});Bridge.define("Forest.Goal",{$kind:"enum",statics:{fields:{DenCleaned:0,DenMadeCozy:1,EnoughFoodConsumed:2,TimeToRelax:3,HaveRelaxed:4,CaughtFish:5,BeenGiftedHoney:6,DreamtAboutShiftingShape:7}}});Bridge.define("Forest.LocationData",{fields:{Id:0,Name:null,Description:null,Directions:null}});Bridge.define("Forest.LocationId",{$kind:"enum",statics:{fields:{Nowhere:0,Inventory:1,Den:2,NorthForest:3,MossyForestEntrance:4,MossyForestNorth:5,MossyForestSouth:6,SparseForest:7,Glade:8,BeeForest:9,LeafyForestEntrance:10,LeafyForestNorth:11,LeafyForestMiddle:12,LeafyForestSouth:13,SouthForest:14,SouthEastForest:15,WestRiver:16,EastRiver:17,Waterfall:18,ViewPoint:19,Cliffs:20}}});Bridge.define("Forest.ParsedData",{fields:{Id:null,Name:null,Description:null,Answers:null,Directions:null,StartingLocationId:null}});Bridge.define("Forest.Program",{main:function(args){var $step=0,$task1,$task2,$task3,$task4,$task5,$taskResult5,$task6,$task7,$task8,$task9,$jumpFromFinally,titleAsciiArt,locationData,thingData,$t,line,$asyncBody=Bridge.fn.bind(this,function(){for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12],$step);switch($step){case 0:if(titleAsciiArt=System.IO.File.ReadAllLines("ForestTitleArt.txt"),Forest.Program.gameStory=Forest.Program.RemoveEmptyLines(System.IO.File.ReadAllLines("ForestGameStory.txt")),Forest.Program.eventAndGoalExtraText=Forest.Program.RemoveEmptyLinesAndDigits(System.IO.File.ReadAllLines("ForestEventAndGoalText.txt")),Forest.Program.defaultAnswersToGetInteractions=Forest.Program.RemoveEmptyLinesAndDigits(System.IO.File.ReadAllLines("ForestDefaultAnswers.txt")),locationData=System.IO.File.ReadAllLines("ForestLocations.txt"),thingData=System.IO.File.ReadAllLines("ForestThings.txt"),Forest.Program.ParseData(locationData),Forest.Program.ParseData(thingData),Forest.Program.InitializeThingsLocations(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(5,Forest.Program.gameStory)]),$task1=Forest.Program.PressEnterToContinueAndClear(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(6,Forest.Program.gameStory)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(7,Forest.Program.gameStory)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(8,Forest.Program.gameStory)]),Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(9,Forest.Program.gameStory)]),$task4=Forest.Program.PressEnterToContinueAndClear(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:$task4.getAwaitedResult();Console.foregroundColor=Forest.Program.IntroColor;$t=Bridge.getEnumerator(titleAsciiArt);try{while($t.moveNext())line=$t.Current,Console.writeLine(line)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if($task5=Console.readKey(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:if($taskResult5=$task5.getAwaitedResult(),Console.clear(),Console.foregroundColor=Forest.Program.NarrativeColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(0,Forest.Program.gameStory)]),$task6=Forest.Program.PressEnterToContinue(),$step=6,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 6:if($task6.getAwaitedResult(),Console.foregroundColor=Forest.Program.NarrativeColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(1,Forest.Program.gameStory)]),$task7=Forest.Program.PressEnterToContinue(),$step=7,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 7:$task7.getAwaitedResult();Forest.Program.DisplayNewLocation();$step=8;continue;case 8:if(!Forest.Program.quitGame){$step=9;continue}$step=12;continue;case 9:if($task8=Forest.Program.HandlePlayerAction(),$step=10,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 10:if($task8.getAwaitedResult(),$task9=Forest.Program.ApplyGameRules(),$step=11,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 11:$task9.getAwaitedResult();$step=8;continue;case 12:return;default:return}}},arguments);$asyncBody()},statics:{fields:{NarrativeColor:0,PromptColor:0,IntroColor:0,PrintPauseMilliseconds:0,gameStory:null,eventAndGoalExtraText:null,defaultAnswersToGetInteractions:null,LocationsData:null,ThingsData:null,CurrentLocationId:0,PreviousLocation:0,CurrentShape:0,ThingsCurrentLocations:null,GoalCompleted:null,quitGame:!1,CommandsWithMoreThenOneWord:null,ShapesByName:null,DirectionIdsByName:null,ThingIdsByName:null,ThingsYouCanGet:null,ThingsThatAreNpcs:null,ThingsInPileOfLeaves:null,ThingsInDen:null,PreviousThingsInDen:null,FishingPuzzleStarted:!1,ThingsToSearch:null,TypesOfTrash:null,PileOfTrash:null,PiecesOfTrashCollected:0,CorrectArrows:null,EnteredArrows:null,HiddenPathFound:!1,NailFound:!1,BeeHasBeenInBeeForest:!1,BeeIsHome:!1,HoneyPuzzleStarted:!1,HaveTriedToEatFlower:!1,HaveTriedToSwimOverRiver:!1,ListOfEatenThings:null,FirstTimeSwimingOverRiver:!1},ctors:{init:function(){this.NarrativeColor=ConsoleColor.darkGreen;this.PromptColor=ConsoleColor.darkGray;this.IntroColor=ConsoleColor.white;this.PrintPauseMilliseconds=150;this.LocationsData=new(System.Collections.Generic.Dictionary$2(Forest.LocationId,Forest.LocationData).ctor);this.ThingsData=new(System.Collections.Generic.Dictionary$2(Forest.ThingId,Forest.ThingData).ctor);this.CurrentLocationId=Forest.LocationId.Den;this.PreviousLocation=Forest.Program.CurrentLocationId;this.CurrentShape=Forest.ThingId.ShapeBear;this.ThingsCurrentLocations=new(System.Collections.Generic.Dictionary$2(Forest.ThingId,System.Collections.Generic.List$1(Forest.LocationId)).ctor);this.GoalCompleted=function(_o1){return _o1.add(Forest.Goal.DenCleaned,!1),_o1.add(Forest.Goal.DenMadeCozy,!1),_o1.add(Forest.Goal.EnoughFoodConsumed,!1),_o1.add(Forest.Goal.TimeToRelax,!1),_o1.add(Forest.Goal.HaveRelaxed,!1),_o1.add(Forest.Goal.DreamtAboutShiftingShape,!1),_o1.add(Forest.Goal.CaughtFish,!1),_o1.add(Forest.Goal.BeenGiftedHoney,!1),_o1}(new(System.Collections.Generic.Dictionary$2(Forest.Goal,System.Boolean).ctor));this.quitGame=!1;this.CommandsWithMoreThenOneWord=function(_o2){return _o2.add("shift shape"),_o2.add("change shape"),_o2.add("shape shift"),_o2.add("look at"),_o2.add("throw away"),_o2}(new(System.Collections.Generic.List$1(System.String).ctor));this.ShapesByName=function(_o3){return _o3.add("bear",Forest.ThingId.ShapeBear),_o3.add("squirrel",Forest.ThingId.ShapeSquirrel),_o3}(new(System.Collections.Generic.Dictionary$2(System.String,Forest.ThingId).ctor));this.DirectionIdsByName=function(_o4){return _o4.add("n",Forest.Direction.North),_o4.add("north",Forest.Direction.North),_o4.add("ne",Forest.Direction.Northeast),_o4.add("northeast",Forest.Direction.Northeast),_o4.add("north east",Forest.Direction.Northeast),_o4.add("e",Forest.Direction.East),_o4.add("east",Forest.Direction.East),_o4.add("se",Forest.Direction.Southeast),_o4.add("southeast",Forest.Direction.Southeast),_o4.add("south east",Forest.Direction.Southeast),_o4.add("s",Forest.Direction.South),_o4.add("south",Forest.Direction.South),_o4.add("sw",Forest.Direction.Southwest),_o4.add("southwest",Forest.Direction.Southwest),_o4.add("south west",Forest.Direction.Southwest),_o4.add("w",Forest.Direction.West),_o4.add("west",Forest.Direction.West),_o4.add("nw",Forest.Direction.Northwest),_o4.add("northwest",Forest.Direction.Northwest),_o4.add("north west",Forest.Direction.Northwest),_o4}(new(System.Collections.Generic.Dictionary$2(System.String,Forest.Direction).ctor));this.ThingIdsByName=function(_o5){return _o5.add("moss",Forest.ThingId.Moss),_o5.add("leaves",Forest.ThingId.PileOfLeaves),_o5.add("leafs",Forest.ThingId.PileOfLeaves),_o5.add("leaf",Forest.ThingId.PileOfLeaves),_o5.add("pile of leaves",Forest.ThingId.PileOfLeaves),_o5.add("pile of leafs",Forest.ThingId.PileOfLeaves),_o5.add("pile of leaf",Forest.ThingId.PileOfLeaves),_o5.add("pile",Forest.ThingId.PileOfLeaves),_o5.add("big leaves",Forest.ThingId.OkLeaves),_o5.add("big leafs",Forest.ThingId.OkLeaves),_o5.add("big leaf",Forest.ThingId.OkLeaves),_o5.add("old leaves",Forest.ThingId.OldLeaves),_o5.add("old leafs",Forest.ThingId.OldLeaves),_o5.add("old leaf",Forest.ThingId.OldLeaves),_o5.add("soft leaves",Forest.ThingId.SoftLeaves),_o5.add("soft leafs",Forest.ThingId.SoftLeaves),_o5.add("soft leaf",Forest.ThingId.SoftLeaves),_o5.add("grass",Forest.ThingId.Grass),_o5.add("berries",Forest.ThingId.Berries),_o5.add("berry",Forest.ThingId.Berries),_o5.add("blue",Forest.ThingId.Berries),_o5.add("red",Forest.ThingId.Berries),_o5.add("blueberries",Forest.ThingId.Berries),_o5.add("blueberry",Forest.ThingId.Berries),_o5.add("redberries",Forest.ThingId.Berries),_o5.add("redberry",Forest.ThingId.Berries),_o5.add("nuts",Forest.ThingId.Nuts),_o5.add("nut",Forest.ThingId.Nuts),_o5.add("mushrooms",Forest.ThingId.Mushrooms),_o5.add("mushroom",Forest.ThingId.Mushrooms),_o5.add("fungi",Forest.ThingId.Mushrooms),_o5.add("fungis",Forest.ThingId.Mushrooms),_o5.add("fungus",Forest.ThingId.Mushrooms),_o5.add("funguses",Forest.ThingId.Mushrooms),_o5.add("shroom",Forest.ThingId.Mushrooms),_o5.add("shrooms",Forest.ThingId.Mushrooms),_o5.add("chanterelle",Forest.ThingId.Mushrooms),_o5.add("chanterelles",Forest.ThingId.Mushrooms),_o5.add("flower",Forest.ThingId.Flower),_o5.add("flowers",Forest.ThingId.Flowers),_o5.add("bee",Forest.ThingId.Bee),_o5.add("bees",Forest.ThingId.Bees),_o5.add("honey",Forest.ThingId.Honey),_o5.add("fish",Forest.ThingId.Fish),_o5.add("fishes",Forest.ThingId.Fish),_o5.add("stick",Forest.ThingId.OldStick),_o5.add("old stick",Forest.ThingId.OldStick),_o5.add("long stick",Forest.ThingId.LongStick),_o5.add("rope",Forest.ThingId.Rope),_o5.add("trash",Forest.ThingId.Trash),_o5.add("garbage",Forest.ThingId.Trash),_o5.add("note",Forest.ThingId.Notes),_o5.add("notes",Forest.ThingId.Notes),_o5.add("bulletin board",Forest.ThingId.Notes),_o5.add("bulletinboard",Forest.ThingId.Notes),_o5.add("board",Forest.ThingId.Notes),_o5.add("bulletin",Forest.ThingId.Notes),_o5.add("trunk",Forest.ThingId.Notes),_o5.add("trunks",Forest.ThingId.Notes),_o5.add("scribble",Forest.ThingId.Notes),_o5.add("scribbles",Forest.ThingId.Notes),_o5.add("binoculars",Forest.ThingId.Binoculars),_o5.add("telescope",Forest.ThingId.Binoculars),_o5.add("nail",Forest.ThingId.Nail),_o5.add("fishing rod",Forest.ThingId.FishingRodOld),_o5.add("rod",Forest.ThingId.FishingRodOld),_o5.add("owl",Forest.ThingId.Owl),_o5.add("frog",Forest.ThingId.Frog),_o5.add("den",Forest.ThingId.Dirt),_o5.add("dirty den",Forest.ThingId.Dirt),_o5}(new(System.Collections.Generic.Dictionary$2(System.String,Forest.ThingId).ctor));this.ThingsYouCanGet=function(_o6){return _o6.add(Forest.ThingId.Moss),_o6.add(Forest.ThingId.OldLeaves),_o6.add(Forest.ThingId.OkLeaves),_o6.add(Forest.ThingId.SoftLeaves),_o6.add(Forest.ThingId.Grass),_o6.add(Forest.ThingId.LongStick),_o6.add(Forest.ThingId.OldStick),_o6.add(Forest.ThingId.Trash),_o6.add(Forest.ThingId.Fish),_o6.add(Forest.ThingId.Flower),_o6.add(Forest.ThingId.Honey),_o6.add(Forest.ThingId.Necklace),_o6.add(Forest.ThingId.Mushrooms),_o6}(new(System.Collections.Generic.List$1(Forest.ThingId).ctor));this.ThingsThatAreNpcs=System.Array.init([Forest.ThingId.Owl,Forest.ThingId.Frog],Forest.ThingId);this.ThingsInPileOfLeaves=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);this.ThingsInDen=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);this.PreviousThingsInDen=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);this.FishingPuzzleStarted=!1;this.ThingsToSearch=function(_o7){return _o7.add("bench"),_o7.add("benches"),_o7.add("table"),_o7.add("tables"),_o7.add("blanket"),_o7.add("blankets"),_o7.add("trash"),_o7.add("can"),_o7.add("trashcan"),_o7.add("picnic"),_o7.add("mess"),_o7.add("fence"),_o7.add("ground"),_o7.add("grill"),_o7.add("bbq"),_o7.add("picnics"),_o7.add("trashcans"),_o7.add("cans"),_o7.add("basket"),_o7.add("baskets"),_o7}(new(System.Collections.Generic.List$1(System.String).ctor));this.TypesOfTrash=function(_o8){return _o8.add("a napkin"),_o8.add("a spoon"),_o8.add("a fork"),_o8.add("a jar"),_o8.add("a straw"),_o8.add("a juice box"),_o8.add("a paper cup"),_o8.add("a frisbee"),_o8.add("a toothpick"),_o8.add("a plastic bag"),_o8.add("a bottle"),_o8}(new(System.Collections.Generic.List$1(System.String).ctor));this.PileOfTrash=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);this.PiecesOfTrashCollected=0;this.CorrectArrows=function(_o9){return _o9.add("left"),_o9.add("right"),_o9.add("down"),_o9.add("left"),_o9.add("left"),_o9.add("up"),_o9}(new(System.Collections.Generic.List$1(System.String).ctor));this.EnteredArrows=new(System.Collections.Generic.List$1(System.String).ctor);this.HiddenPathFound=!1;this.NailFound=!1;this.BeeHasBeenInBeeForest=!1;this.BeeIsHome=!1;this.HoneyPuzzleStarted=!1;this.HaveTriedToEatFlower=!1;this.HaveTriedToSwimOverRiver=!1;this.ListOfEatenThings=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);this.FirstTimeSwimingOverRiver=!0}},methods:{EnumParse:function(T,s){return Bridge.cast(Bridge.unbox(System.Enum.parse(T,s),T),T)},Print:function(text){var $t,$t1,maximumLineLength=Console.windowWidth-2|0,lineMatches=System.Text.RegularExpressions.Regex.matches(text,"([^\\\\]{1,"+maximumLineLength+"})(?:$|\\s|\\\\n)"),line;$t=Bridge.getEnumerator(lineMatches);try{while($t.moveNext())line=Bridge.cast($t.Current,System.Text.RegularExpressions.Match),System.String.contains(line.getGroups().get(0).getValue(),"\\n")?(Console.writeLine(($t1=System.String.split(line.getGroups().get(0).getValue(),System.Array.init(["\\n"],System.String),null,0))[System.Array.index(0,$t1)]),Bridge.sleep(Forest.Program.PrintPauseMilliseconds),Console.writeLine()):(Console.writeLine(line.getGroups().get(0).getValue()),Bridge.sleep(Forest.Program.PrintPauseMilliseconds))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}},Reply:function(text){Forest.Program.Print(text);Console.writeLine()},Capitalize:function(text){var capitalizeFirstLetter=String.fromCharCode(text.charCodeAt(0)).toUpperCase();return text=System.String.remove(text,0,1),(capitalizeFirstLetter||"")+(text||"")},AskForInput:function(narrative){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,words,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:if(Console.foregroundColor=Forest.Program.NarrativeColor,Forest.Program.Print(narrative),Console.foregroundColor=Forest.Program.PromptColor,Console.write("> "),$task1=Console.readLine(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:$taskResult1=$task1.getAwaitedResult();words=Forest.Program.SplitCommand($taskResult1.toLowerCase());$tcs.setResult(words);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},AskWitchStick:function(){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,choosenStick,words,thingIds,$t,thingId,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:if(choosenStick=Forest.ThingId.Placeholder,Console.writeLine(),$task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(76,Forest.Program.eventAndGoalExtraText)]),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:$taskResult1=$task1.getAwaitedResult();words=$taskResult1;for(var word=0;word<words.length;word=word+1|0)Bridge.referenceEquals(words[System.Array.index(word,words)],"old")?words[System.Array.index(word,words)]="old stick":Bridge.referenceEquals(words[System.Array.index(word,words)],"long")?words[System.Array.index(word,words)]="long stick":Bridge.referenceEquals(words[System.Array.index(word,words)],"stick")&&(words[System.Array.index(word,words)]="");thingIds=new(System.Collections.Generic.List$1(Forest.ThingId).$ctor1)(Forest.Program.GetThingIdsFromWords(words));$t=Bridge.getEnumerator(thingIds);try{while($t.moveNext())if(thingId=$t.Current,thingId===Forest.ThingId.LongStick){$tcs.setResult(choosenStick=Forest.ThingId.LongStick);return}else if(thingId===Forest.ThingId.OldStick){$tcs.setResult(choosenStick=Forest.ThingId.OldStick);return}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}Forest.Program.ThingIsAvailable(Forest.ThingId.LongStick)&&Forest.Program.ThingIsAvailable(Forest.ThingId.OldStick)&&Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(77,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(choosenStick);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},AskWitchShape:function(){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,choosenShape,words,thingIds,$t,word,$t1,thingId,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:if(choosenShape=Forest.ThingId.Placeholder,Console.writeLine(),$task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(180,Forest.Program.eventAndGoalExtraText)]),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:$taskResult1=$task1.getAwaitedResult();words=$taskResult1;thingIds=new(System.Collections.Generic.List$1(Forest.ThingId).ctor);$t=Bridge.getEnumerator(words);try{while($t.moveNext())word=$t.Current,Forest.Program.ShapesByName.containsKey(word)&&thingIds.add(Forest.Program.ShapesByName.getItem(word))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}$t1=Bridge.getEnumerator(thingIds);try{while($t1.moveNext())if(thingId=$t1.Current,thingId===Forest.ThingId.ShapeBear){$tcs.setResult(choosenShape=Forest.ThingId.ShapeBear);return}else if(thingId===Forest.ThingId.ShapeSquirrel){$tcs.setResult(choosenShape=Forest.ThingId.ShapeSquirrel);return}}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}$tcs.setResult(choosenShape);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},SplitCommand:function(command){for(var twoWords,threeWords,words=System.Text.RegularExpressions.Regex.split(command,"[^a-zA-Z]+"),word=0;word<(words.length-1|0);word=word+1|0)twoWords=(words[System.Array.index(word,words)]||"")+" "+(words[System.Array.index(word+1|0,words)]||""),threeWords="",(word+2|0)<words.length&&(threeWords=(twoWords||"")+" "+(words[System.Array.index(word+2|0,words)]||"")),Forest.Program.ThingsToSearch.contains(threeWords)||Forest.Program.ThingIdsByName.containsKey(threeWords)||Forest.Program.CommandsWithMoreThenOneWord.contains(threeWords)?(words[System.Array.index(word,words)]=threeWords,words[System.Array.index(word+1|0,words)]="",words[System.Array.index(word+2|0,words)]=""):(Forest.Program.ThingsToSearch.contains(twoWords)||Forest.Program.ThingIdsByName.containsKey(twoWords)||Forest.Program.DirectionIdsByName.containsKey(twoWords)||Forest.Program.CommandsWithMoreThenOneWord.contains(twoWords))&&(words[System.Array.index(word,words)]=twoWords,words[System.Array.index(word+1|0,words)]="");return words},GetDirectionFromWords:function(words){var $t,direction=Forest.Direction.NoDirection,word;$t=Bridge.getEnumerator(words);try{while($t.moveNext())if(word=$t.Current,Forest.Program.DirectionIdsByName.containsKey(word)){direction=Forest.Program.DirectionIdsByName.getItem(word);break}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return direction},GetThingIdsFromWords:function(words){var $t,thingIds=new(System.Collections.Generic.List$1(Forest.ThingId).ctor),word;$t=Bridge.getEnumerator(words);try{while($t.moveNext())word=$t.Current,Forest.Program.ThingIdsByName.containsKey(word)&&thingIds.add(Forest.Program.ThingIdsByName.getItem(word))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return thingIds},GetThingKeysFromWords:function(words,thingIdsFromCommand){var $t,$t1,thingKeysFromCommand=new(System.Collections.Generic.List$1(System.String).ctor),thingId,word,thingIdsByNameKeys;$t=Bridge.getEnumerator(thingIdsFromCommand);try{while($t.moveNext()){thingId=$t.Current;$t1=Bridge.getEnumerator(words);try{while($t1.moveNext())if(word=$t1.Current,thingIdsByNameKeys=Forest.Program.ThingIdsByName.Keys,System.Linq.Enumerable.from(thingIdsByNameKeys,System.String).contains(word)&&thingId===Forest.Program.ThingIdsByName.getItem(word)){thingKeysFromCommand.add(word);break}}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return thingKeysFromCommand},GetThingsAtLocation:function(locationId){return System.Linq.Enumerable.from(Forest.Program.ThingsCurrentLocations.Keys,Forest.ThingId).where(function(thingId){return Forest.Program.ThingsCurrentLocations.getItem(thingId).contains(locationId)})},GetThingName:function(thingId){return Forest.Program.ThingsData.getItem(thingId).Name},GetLocationName:function(locationId){return Forest.Program.LocationsData.getItem(locationId).Name},PressEnterToContinueAndClear:function(){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:if($task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:$task1.getAwaitedResult();Console.clear();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},PressEnterToContinue:function(){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,key,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:Console.foregroundColor=Forest.Program.PromptColor;Console.write("...");key=new ConsoleKey;case 1:if($task1=Console.readKey(!0),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:$taskResult1=$task1.getAwaitedResult();key=$taskResult1.key;$step=3;continue;case 3:if(key!==ConsoleKey.enter){$step=1;continue}$step=4;continue;case 4:Console.cursorLeft=0;$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandlePlayerAction:function(){var $step=0,$task1,$taskResult1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$task10,$task11,$task12,$task13,$task14,$task15,$task16,$task17,$task18,$task19,$task20,$task21,$task22,$task23,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,words,verb,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],$step);switch($step){case 0:if($task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(38,Forest.Program.eventAndGoalExtraText)]),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($taskResult1=$task1.getAwaitedResult(),words=$taskResult1,verb="",Bridge.referenceEquals(words[System.Array.index(0,words)],"")||(verb=words[System.Array.index(0,words)].trim()),verb==="north"||verb==="n"){$step=2;continue}else if(verb==="quit"||verb==="end"||verb==="exit"){$step=4;continue}else if(verb==="shift"||verb==="change"||verb==="shift shape"||verb==="shiftshape"||verb==="change shape"||verb==="changeshape"||verb==="shape shift"||verb==="shapeshift"){$step=6;continue}else if(verb==="inventory"||verb==="i"){$step=8;continue}else if(verb==="use"){$step=10;continue}else if(verb==="search"){$step=12;continue}else if(verb==="eat"){$step=14;continue}else if(verb==="read"){$step=15;continue}else if(verb==="sleep"){$step=17;continue}else if(verb==="swim"){$step=19;continue}else if(verb==="go"){$step=21;continue}else if(verb==="clean"){$step=23;continue}else if(verb==="look"||verb==="look at"){$step=25;continue}else if(verb==="place"||verb==="drop"||verb==="throw"||verb==="throw away"){$step=27;continue}else if(verb==="take"||verb==="pick"||verb==="get"||verb==="grab"||verb==="catch"){$step=29;continue}else if(verb==="northeast"||verb==="north east"||verb==="ne"){$step=31;continue}else if(verb==="east"||verb==="e"){$step=33;continue}else if(verb==="southeast"||verb==="south east"||verb==="se"){$step=35;continue}else if(verb==="south"||verb==="s"){$step=37;continue}else if(verb==="southwest"||verb==="south west"||verb==="sw"){$step=39;continue}else if(verb==="west"||verb==="w"){$step=41;continue}else if(verb==="northwest"||verb==="north west"||verb==="nw"){$step=43;continue}else if(verb==="help"){$step=45;continue}else{$step=47;continue}$step=48;continue;case 2:if($task2=Forest.Program.HandleMovement(Forest.Direction.North),$step=3,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 3:$task2.getAwaitedResult();$step=48;continue;case 4:if($task22=Forest.Program.AskIfPlayerWantToQuit(),$step=5,$task22.isCompleted())continue;$task22.continue($asyncBody);return;case 5:$task22.getAwaitedResult();$step=48;continue;case 6:if($task21=Forest.Program.ShiftShape(words),$step=7,$task21.isCompleted())continue;$task21.continue($asyncBody);return;case 7:$task21.getAwaitedResult();$step=48;continue;case 8:if($task20=Forest.Program.HandleInventory(),$step=9,$task20.isCompleted())continue;$task20.continue($asyncBody);return;case 9:$task20.getAwaitedResult();$step=48;continue;case 10:if($task19=Forest.Program.HandleUse(words),$step=11,$task19.isCompleted())continue;$task19.continue($asyncBody);return;case 11:$task19.getAwaitedResult();$step=48;continue;case 12:if($task18=Forest.Program.HandleSearch(words),$step=13,$task18.isCompleted())continue;$task18.continue($asyncBody);return;case 13:$task18.getAwaitedResult();$step=48;continue;case 14:Forest.Program.HandleEat(words);$step=48;continue;case 15:if($task17=Forest.Program.HandleRead(words),$step=16,$task17.isCompleted())continue;$task17.continue($asyncBody);return;case 16:$task17.getAwaitedResult();$step=48;continue;case 17:if($task16=Forest.Program.HandleSleep(),$step=18,$task16.isCompleted())continue;$task16.continue($asyncBody);return;case 18:$task16.getAwaitedResult();$step=48;continue;case 19:if($task15=Forest.Program.HandleSwim(words),$step=20,$task15.isCompleted())continue;$task15.continue($asyncBody);return;case 20:$task15.getAwaitedResult();$step=48;continue;case 21:if($task14=Forest.Program.HandleGo(words),$step=22,$task14.isCompleted())continue;$task14.continue($asyncBody);return;case 22:$task14.getAwaitedResult();$step=48;continue;case 23:if($task13=Forest.Program.HandleClean(words),$step=24,$task13.isCompleted())continue;$task13.continue($asyncBody);return;case 24:$task13.getAwaitedResult();$step=48;continue;case 25:if($task12=Forest.Program.HandleLook(words),$step=26,$task12.isCompleted())continue;$task12.continue($asyncBody);return;case 26:$task12.getAwaitedResult();$step=48;continue;case 27:if($task11=Forest.Program.HandleDrop(words),$step=28,$task11.isCompleted())continue;$task11.continue($asyncBody);return;case 28:$task11.getAwaitedResult();$step=48;continue;case 29:if($task10=Forest.Program.HandleGet(words),$step=30,$task10.isCompleted())continue;$task10.continue($asyncBody);return;case 30:$task10.getAwaitedResult();$step=48;continue;case 31:if($task9=Forest.Program.HandleMovement(Forest.Direction.Northeast),$step=32,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 32:$task9.getAwaitedResult();$step=48;continue;case 33:if($task8=Forest.Program.HandleMovement(Forest.Direction.East),$step=34,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 34:$task8.getAwaitedResult();$step=48;continue;case 35:if($task7=Forest.Program.HandleMovement(Forest.Direction.Southeast),$step=36,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 36:$task7.getAwaitedResult();$step=48;continue;case 37:if($task6=Forest.Program.HandleMovement(Forest.Direction.South),$step=38,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 38:$task6.getAwaitedResult();$step=48;continue;case 39:if($task5=Forest.Program.HandleMovement(Forest.Direction.Southwest),$step=40,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 40:$task5.getAwaitedResult();$step=48;continue;case 41:if($task4=Forest.Program.HandleMovement(Forest.Direction.West),$step=42,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 42:$task4.getAwaitedResult();$step=48;continue;case 43:if($task3=Forest.Program.HandleMovement(Forest.Direction.Northwest),$step=44,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 44:$task3.getAwaitedResult();$step=48;continue;case 45:if($task23=Forest.Program.DisplayInstructions(),$step=46,$task23.isCompleted())continue;$task23.continue($asyncBody);return;case 46:$task23.getAwaitedResult();$step=48;continue;case 47:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(206,Forest.Program.eventAndGoalExtraText)]);$step=48;continue;case 48:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleMovement:function(direction){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,currentLocation,newLocation,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,33],$step);switch($step){case 0:if(currentLocation=Forest.Program.LocationsData.getItem(Forest.Program.CurrentLocationId),Forest.Program.CurrentLocationId===Forest.LocationId.Cliffs&&direction===Forest.Direction.South){$step=1;continue}else{$step=6;continue}case 1:if(Forest.Program.CurrentShape===Forest.ThingId.ShapeSquirrel){$step=2;continue}else{$step=4;continue}case 2:if($task1=Forest.Program.EndGame(),$step=3,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 3:$task1.getAwaitedResult();$step=5;continue;case 4:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(182,Forest.Program.eventAndGoalExtraText)]);$step=5;continue;case 5:$step=33;continue;case 6:if(Forest.Program.CurrentLocationId===Forest.LocationId.Cliffs&&direction===Forest.Direction.North&&Forest.Program.CurrentShape===Forest.ThingId.ShapeSquirrel){$step=7;continue}else{$step=8;continue}case 7:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(192,Forest.Program.eventAndGoalExtraText)]);$step=32;continue;case 8:if(direction===Forest.Direction.South&&Forest.Program.CurrentLocationId===Forest.LocationId.WestRiver){$step=9;continue}else{$step=11;continue}case 9:if($task2=Forest.Program.SwimOverRiver(),$step=10,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 10:$task2.getAwaitedResult();$step=31;continue;case 11:if(currentLocation.Directions.containsKey(direction)&&currentLocation.Id===Forest.LocationId.BeeForest&&currentLocation.Directions.getItem(direction)===Forest.LocationId.Glade&&Forest.Program.BeeIsHome&&!Forest.Program.HoneyPuzzleStarted){$step=12;continue}else{$step=14;continue}case 12:if($task3=Forest.Program.GetIdeaAboutHoney(),$step=13,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 13:$task3.getAwaitedResult();$step=30;continue;case 14:if(currentLocation.Directions.containsKey(direction)&&currentLocation.Id===Forest.LocationId.LeafyForestMiddle&&currentLocation.Directions.getItem(direction)===Forest.LocationId.LeafyForestEntrance&&Forest.Program.HaveThing(Forest.ThingId.PileOfLeaves)){$step=15;continue}else{$step=17;continue}case 15:if(Forest.Program.MoveBee(Forest.LocationId.Den),$task4=Forest.Program.BringLeavesToDen(),$step=16,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 16:$task4.getAwaitedResult();$step=29;continue;case 17:if(currentLocation.Directions.containsKey(direction)&&currentLocation.Id===Forest.LocationId.LeafyForestSouth&&currentLocation.Directions.getItem(direction)===Forest.LocationId.WestRiver){$step=18;continue}else{$step=20;continue}case 18:if(Forest.Program.MoveBee(Forest.LocationId.EastRiver),$task5=Forest.Program.GoDownWaterSlide(),$step=19,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 19:$task5.getAwaitedResult();$step=28;continue;case 20:if(currentLocation.Directions.containsKey(direction)&&currentLocation.Id===Forest.LocationId.WestRiver&&currentLocation.Directions.getItem(direction)===Forest.LocationId.LeafyForestSouth){$step=21;continue}else{$step=22;continue}case 21:Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(1,Forest.Program.eventAndGoalExtraText)]);$step=27;continue;case 22:if(currentLocation.Directions.containsKey(direction)&&currentLocation.Id===Forest.LocationId.Waterfall&&currentLocation.Directions.getItem(direction)===Forest.LocationId.SouthEastForest&&!Forest.Program.NailFound){$step=23;continue}else{$step=25;continue}case 23:if(Forest.Program.MoveBee(Forest.LocationId.SouthEastForest),$task6=Forest.Program.FindNail(),$step=24,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 24:$task6.getAwaitedResult();$step=26;continue;case 25:currentLocation.Directions.containsKey(direction)?(newLocation=currentLocation.Directions.getItem(direction),Forest.Program.MoveBee(newLocation),Forest.Program.MovePlayerToNewLocation(newLocation)):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(28,Forest.Program.eventAndGoalExtraText)]);$step=26;continue;case 33:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleGet:function(words){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,$t1,$t2,$t3,$t4,$t5,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}else{$step=17;continue}case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);$step=2;continue;case 2:if($t.moveNext()){thing=$t.Current;$step=3;continue}$step=16;continue;case 3:if(thingId=Forest.Program.ThingIdsByName.getItem(thing),thingId===Forest.ThingId.Necklace&&Forest.Program.ThingIsHere(Forest.ThingId.Necklace)){$step=4;continue}else{$step=6;continue}case 4:if($task1=Forest.Program.FindNecklace(),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:$task1.getAwaitedResult();$tcs.setResult(null);return;case 6:if(thingId===Forest.ThingId.Necklace&&thingIdsFromCommand.Count===1){$step=2;continue}else if(thingId===Forest.ThingId.Necklace){Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(5,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return}$step=7;continue;case 7:if(!Forest.Program.ThingIsHere(thingId)){Forest.Program.Reply(($t1=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(2,$t1)]);$tcs.setResult(null);return}if(Forest.Program.HaveThing(thingId)&&thingId!==Forest.ThingId.Trash){Forest.Program.Reply(($t2=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(3,$t2)]);$tcs.setResult(null);return}if(Forest.Program.ThingIsHere(thingId)&&!Forest.Program.CanGetThing(thingId)){Forest.Program.Reply(($t3=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(1,$t3)]);$tcs.setResult(null);return}if(thingId===Forest.ThingId.Grass){$step=8;continue}else if(thingId===Forest.ThingId.OkLeaves||thingId===Forest.ThingId.OldLeaves||thingId===Forest.ThingId.SoftLeaves){$step=9;continue}else if(thingId===Forest.ThingId.Trash){$step=10;continue}else if(thingId===Forest.ThingId.Fish){$step=11;continue}else if(thingId===Forest.ThingId.Honey){$step=13;continue}else{$step=14;continue}$step=15;continue;case 8:Forest.Program.PickUpGrassAndGetFlower();$tcs.setResult(null);return;case 9:Forest.Program.PickUpLeaves(thingId);$tcs.setResult(null);return;case 10:Forest.Program.PickUpTrash();$tcs.setResult(null);return;case 11:if($task2=Forest.Program.StartFishingPuzzle(),$step=12,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 12:$task2.getAwaitedResult();$tcs.setResult(null);return;case 13:Forest.Program.Reply(($t4=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(0,$t4)]);Forest.Program.MoveThing(thingId,Forest.Program.CurrentLocationId,Forest.LocationId.Inventory);$tcs.setResult(null);return;case 14:Forest.Program.Reply(($t5=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(0,$t5)]);Forest.Program.GetThing(thingId);$tcs.setResult(null);return;case 15:$step=2;continue;case 16:$step=18;continue;case 17:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(5,Forest.Program.eventAndGoalExtraText)]);$step=18;continue;case 18:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleDrop:function(words){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,$t1,$t2,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}else{$step=13;continue}case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);$step=2;continue;case 2:if($t.moveNext()){thing=$t.Current;$step=3;continue}$step=12;continue;case 3:if(thingId=Forest.Program.ThingIdsByName.getItem(thing),thingId===Forest.ThingId.OldLeaves||thingId===Forest.ThingId.OkLeaves||thingId===Forest.ThingId.SoftLeaves){Forest.Program.DropPileOfLeavesOutsideOfDen();$tcs.setResult(null);return}if(!Forest.Program.HaveThing(thingId)&&thingId!==Forest.ThingId.OldStick&&thingId!==Forest.ThingId.LongStick){Forest.Program.Reply(($t1=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(7,$t1)]);$tcs.setResult(null);return}if(thingId===Forest.ThingId.Moss||thingId===Forest.ThingId.Grass||thingId===Forest.ThingId.PileOfLeaves){$step=4;continue}else if(thingId===Forest.ThingId.OldLeaves||thingId===Forest.ThingId.OkLeaves||thingId===Forest.ThingId.SoftLeaves){$step=5;continue}else if(thingId===Forest.ThingId.Trash){$step=6;continue}else if(thingId===Forest.ThingId.Flower){$step=7;continue}else if(thingId===Forest.ThingId.LongStick||thingId===Forest.ThingId.OldStick){$step=8;continue}else{$step=10;continue}$step=11;continue;case 4:Forest.Program.DropThingInDen(thingId);$step=11;continue;case 5:Forest.Program.DropPileOfLeavesOutsideOfDen();$step=11;continue;case 6:Forest.Program.DropTrash();$step=11;continue;case 7:Forest.Program.DropFlower();$step=11;continue;case 8:if($task1=Forest.Program.DropStick(words),$step=9,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 9:$task1.getAwaitedResult();$step=11;continue;case 10:Forest.Program.Reply(($t2=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(5,$t2)]);$step=11;continue;case 11:$step=2;continue;case 12:$step=14;continue;case 13:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(26,Forest.Program.eventAndGoalExtraText)]);$step=14;continue;case 14:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleInventory:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIds,thingsInInventoryList,$t,thing,thingId,thingsInInventory,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7],$step);switch($step){case 0:thingIds=System.Enum.getNames(Forest.ThingId);thingsInInventoryList=new(System.Collections.Generic.List$1(System.String).ctor);$t=Bridge.getEnumerator(thingIds);try{while($t.moveNext())thing=$t.Current,thingId=Forest.Program.EnumParse(Forest.ThingId,thing),Forest.Program.HaveThing(thingId)&&thingsInInventoryList.add(Forest.Program.ThingsData.getItem(thingId).Name.toLowerCase())}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(thingsInInventoryList.Count>0){$step=1;continue}else{$step=6;continue}case 1:if(thingsInInventory=Forest.Program.FormatListIntoString(thingsInInventoryList),Forest.Program.Reply((Forest.Program.eventAndGoalExtraText[System.Array.index(49,Forest.Program.eventAndGoalExtraText)]||"")+(thingsInInventory||"")+"."),Forest.Program.FishingPuzzleStarted&&Forest.Program.HaveThing(Forest.ThingId.Rope)&&Forest.Program.HaveThing(Forest.ThingId.Nail)&&(Forest.Program.HaveThing(Forest.ThingId.OldStick)||Forest.Program.HaveThing(Forest.ThingId.LongStick))){$step=2;continue}$step=5;continue;case 2:if($task1=Forest.Program.PressEnterToContinue(),$step=3,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 3:if($task1.getAwaitedResult(),$task2=Forest.Program.CombineToFishingRod(),$step=4,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 4:$task2.getAwaitedResult();$step=5;continue;case 5:$step=7;continue;case 6:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(48,Forest.Program.eventAndGoalExtraText)]);$step=7;continue;case 7:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},ShiftShape:function(words){var $step=0,$task1,$task2,$taskResult2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,$t,word,$t1,word1,choosenShape,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,21,22,23,24,25],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),Forest.Program.HaveThing(Forest.ThingId.Necklace)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)){$step=1;continue}else{$step=24;continue}case 1:$t=Bridge.getEnumerator(words);$step=2;continue;case 2:if($t.moveNext()){word=$t.Current;$step=3;continue}$step=10;continue;case 3:if(Forest.Program.ShapesByName.containsKey(word)){$step=4;continue}$step=9;continue;case 4:if(Forest.Program.CurrentShape===Forest.Program.ShapesByName.getItem(word)){$step=5;continue}else{$step=6;continue}case 5:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(179,Forest.Program.eventAndGoalExtraText)]);$step=8;continue;case 6:if(Forest.Program.CurrentShape=Forest.Program.ShapesByName.getItem(word),Console.clear(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(178,Forest.Program.eventAndGoalExtraText)]),Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.Program.ShapesByName.getItem(word)).Description),$task1=Forest.Program.PressEnterToContinue(),$step=7,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 7:$task1.getAwaitedResult();Forest.Program.DisplayNewLocation();$step=8;continue;case 8:$tcs.setResult(null);return;case 9:$step=2;continue;case 10:$t1=Bridge.getEnumerator(words);$step=11;continue;case 11:if($t1.moveNext()){word1=$t1.Current;$step=12;continue}$step=23;continue;case 12:if(Bridge.referenceEquals(word1,"")&&words.length<3||words.length<2){$step=13;continue}$step=22;continue;case 13:if($task2=Forest.Program.AskWitchShape(),$step=14,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 14:if($taskResult2=$task2.getAwaitedResult(),choosenShape=$taskResult2,choosenShape===Forest.Program.CurrentShape){$step=15;continue}else{$step=16;continue}case 15:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(179,Forest.Program.eventAndGoalExtraText)]);$step=21;continue;case 16:if(choosenShape!==Forest.ThingId.Placeholder){$step=17;continue}else{$step=19;continue}case 17:if(Forest.Program.CurrentShape=choosenShape,Console.clear(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(178,Forest.Program.eventAndGoalExtraText)]),Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.Program.CurrentShape).Description),$task3=Forest.Program.PressEnterToContinue(),$step=18,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 18:$task3.getAwaitedResult();Forest.Program.DisplayNewLocation();$step=20;continue;case 19:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(181,Forest.Program.eventAndGoalExtraText)]);$step=20;continue;case 21:$tcs.setResult(null);return;case 22:$step=11;continue;case 23:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(181,Forest.Program.eventAndGoalExtraText)]);$step=25;continue;case 24:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(208,Forest.Program.eventAndGoalExtraText)]);$step=25;continue;case 25:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleLook:function(words){var $step=0,$task1,$task2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,leavesInPile,count,$t1,leaf,thingArray,$t2,word,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,33,34,35,36],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}else{$step=35;continue}case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);$step=2;continue;case 2:if($t.moveNext()){thing=$t.Current;$step=3;continue}$step=34;continue;case 3:if(thingId=Forest.Program.ThingIdsByName.getItem(thing),thingId===Forest.ThingId.Necklace&&Forest.Program.ThingIsHere(Forest.ThingId.Necklace)){$step=4;continue}else{$step=6;continue}case 4:if($task1=Forest.Program.FindNecklace(),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:$task1.getAwaitedResult();$tcs.setResult(null);return;case 6:if(thingId!==Forest.ThingId.Necklace||Forest.Program.HaveThing(Forest.ThingId.Necklace)||thingIdsFromCommand.Count!==1){$step=8;continue}else{$step=7;continue}case 7:$step=2;continue;case 8:if(thingId===Forest.ThingId.PileOfLeaves){$step=9;continue}else{$step=10;continue}case 9:if(Forest.Program.ThingIsAvailable(thingId)){leavesInPile=System.Array.init(Forest.Program.ThingsInPileOfLeaves.Count,null,System.String);count=0;$t1=Bridge.getEnumerator(Forest.Program.ThingsInPileOfLeaves);try{while($t1.moveNext())leaf=$t1.Current,leavesInPile[System.Array.index(count,leavesInPile)]=Forest.Program.GetThingName(leaf).toLowerCase(),count=count+1|0}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}Forest.Program.ThingsInPileOfLeaves.Count===1?Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(10,Forest.Program.eventAndGoalExtraText)],leavesInPile):Forest.Program.ThingsInPileOfLeaves.Count===2?Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(11,Forest.Program.eventAndGoalExtraText)],leavesInPile):Forest.Program.ThingsInPileOfLeaves.Count===3&&Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(12,Forest.Program.eventAndGoalExtraText)],leavesInPile)}else Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(13,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return;case 10:if(thingId===Forest.ThingId.Dirt){$step=11;continue}else{$step=12;continue}case 11:Forest.Program.LookAtDen();$tcs.setResult(null);return;case 12:if(thingId===Forest.ThingId.Trash){$step=13;continue}else{$step=14;continue}case 13:Forest.Program.LookAtTrash();$tcs.setResult(null);return;case 14:if(thingId===Forest.ThingId.LongStick||thingId===Forest.ThingId.OldStick){$step=15;continue}else{$step=17;continue}case 15:if($task2=Forest.Program.LookAtStick(words),$step=16,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 16:$task2.getAwaitedResult();$tcs.setResult(null);return;case 17:if(thingId===Forest.ThingId.Fish&&Forest.Program.ThingIsAvailable(Forest.ThingId.Fish)){$step=18;continue}else{$step=26;continue}case 18:if(Forest.Program.HaveThing(Forest.ThingId.Fish)){$step=19;continue}else{$step=20;continue}case 19:Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.Fish).Description);$step=25;continue;case 20:if(Forest.Program.FishingPuzzleStarted){$step=23;continue}else{$step=21;continue}case 21:if($task3=Forest.Program.StartFishingPuzzle(),$step=22,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 22:$task3.getAwaitedResult();$step=24;continue;case 23:Forest.Program.ListOfEatenThings.contains(Forest.ThingId.Fish)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(210,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(99,Forest.Program.eventAndGoalExtraText)]);$step=24;continue;case 25:$tcs.setResult(null);return;case 26:Forest.Program.ThingIsAvailable(thingId)?Forest.Program.Reply(Forest.Program.ThingsData.getItem(thingId).Description):(thingArray=System.Array.init([thing],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(47,Forest.Program.eventAndGoalExtraText)],thingArray));$tcs.setResult(null);return;case 33:$step=2;continue;case 34:$step=36;continue;case 35:if(System.Linq.Enumerable.from(words,System.String).count()===1)Forest.Program.DisplayNewLocation();else if(System.Array.contains(words,"view",System.String))Forest.Program.CurrentLocationId===Forest.LocationId.Cliffs||Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint||Forest.Program.CurrentLocationId===Forest.LocationId.Waterfall?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(214,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(215,Forest.Program.eventAndGoalExtraText)]);else{if(Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint){$t2=Bridge.getEnumerator(words);try{while($t2.moveNext())if(word=$t2.Current,Forest.Program.ThingsToSearch.contains(word)){Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(216,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return}}finally{Bridge.is($t2,System.IDisposable)&&$t2.System$IDisposable$Dispose()}}Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(46,Forest.Program.eventAndGoalExtraText)])}$step=36;continue;case 36:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleClean:function(words){var $step=0,$task1,$taskResult1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,newCommand,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,8],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}else{$step=2;continue}case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);try{while($t.moveNext())thing=$t.Current,thingId=Forest.Program.ThingIdsByName.getItem(thing),thingId!==Forest.ThingId.Dirt||Forest.Program.GoalCompleted.getItem(Forest.Goal.DenCleaned)?Forest.Program.Reply((Forest.Program.Capitalize(thing)||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(24,Forest.Program.eventAndGoalExtraText)]||"")):(Forest.Program.GoalCompleted.setItem(Forest.Goal.DenCleaned,!0),Forest.Program.ThingsData.getItem(Forest.ThingId.Dirt).Description=Forest.Program.eventAndGoalExtraText[System.Array.index(22,Forest.Program.eventAndGoalExtraText)],Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(23,Forest.Program.eventAndGoalExtraText)]))}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}$step=8;continue;case 2:if(System.Linq.Enumerable.from(words,System.String).count()===1&&Bridge.referenceEquals(words[System.Array.index(0,words)],"clean")){$step=3;continue}else{$step=6;continue}case 3:if(Console.writeLine(),$task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(45,Forest.Program.eventAndGoalExtraText)]),$step=4,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 4:if($taskResult1=$task1.getAwaitedResult(),newCommand=$taskResult1,$task2=Forest.Program.HandleClean(newCommand),$step=5,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 5:$task2.getAwaitedResult();$step=7;continue;case 6:System.Array.contains(words,"forest",System.String)||System.Array.contains(words,"nature",System.String)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(198,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(44,Forest.Program.eventAndGoalExtraText)]);$step=7;continue;case 8:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleGo:function(words){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,directionFromCommand,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:if(directionFromCommand=Forest.Program.GetDirectionFromWords(words),directionFromCommand!==Forest.Direction.NoDirection){$step=1;continue}else{$step=3;continue}case 1:if($task1=Forest.Program.HandleMovement(directionFromCommand),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:$task1.getAwaitedResult();$step=4;continue;case 3:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(207,Forest.Program.eventAndGoalExtraText)]);$step=4;continue;case 4:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleSwim:function(words){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$t,word,containsDirection,$t1,word1,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,8,9,10,11],$step);switch($step){case 0:if(Forest.Program.CurrentShape===Forest.ThingId.ShapeBear){$step=1;continue}else{$step=10;continue}case 1:$t=Bridge.getEnumerator(words);$step=2;continue;case 2:if($t.moveNext()){word=$t.Current;$step=3;continue}$step=9;continue;case 3:if(Forest.Program.DirectionIdsByName.containsKey(word)){$step=4;continue}$step=8;continue;case 4:if(Forest.Program.DirectionIdsByName.getItem(word)===Forest.Direction.South&&(Forest.Program.CurrentLocationId===Forest.LocationId.WestRiver||Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestSouth)){$step=5;continue}$step=7;continue;case 5:if($task1=Forest.Program.HandleGo(words),$step=6,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 6:$task1.getAwaitedResult();$tcs.setResult(null);return;case 8:$step=2;continue;case 9:containsDirection=!1;$t1=Bridge.getEnumerator(words);try{while($t1.moveNext())if(word1=$t1.Current,Forest.Program.DirectionIdsByName.containsKey(word1)){containsDirection=!0;break}}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}containsDirection||Forest.Program.CurrentLocationId!==Forest.LocationId.SparseForest&&Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestNorth&&Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestMiddle&&Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestSouth?containsDirection||Forest.Program.CurrentLocationId!==Forest.LocationId.WestRiver&&Forest.Program.CurrentLocationId!==Forest.LocationId.Waterfall?Forest.Program.CurrentLocationId!==Forest.LocationId.EastRiver||containsDirection?containsDirection?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(135,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(134,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(133,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(132,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(131,Forest.Program.eventAndGoalExtraText)]);$step=11;continue;case 10:Forest.Program.CurrentShape===Forest.ThingId.ShapeSquirrel&&Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(195,Forest.Program.eventAndGoalExtraText)]);$step=11;continue;case 11:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleSleep:function(){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:if(Forest.Program.CurrentLocationId===Forest.LocationId.Den&&Forest.Program.HaveThing(Forest.ThingId.Necklace)&&!Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)){$step=1;continue}else{$step=3;continue}case 1:if($task1=Forest.Program.SleepAndDream(),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:$task1.getAwaitedResult();$step=4;continue;case 3:Forest.Program.CurrentLocationId===Forest.LocationId.Den&&!Forest.Program.HaveThing(Forest.ThingId.Necklace)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.HaveRelaxed)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(201,Forest.Program.eventAndGoalExtraText)]):Forest.Program.HaveThing(Forest.ThingId.Necklace)&&!Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(154,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentLocationId===Forest.LocationId.Den&&Forest.Program.HaveTriedToSwimOverRiver&&Forest.Program.GoalCompleted.getItem(Forest.Goal.TimeToRelax)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(155,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentLocationId===Forest.LocationId.Den&&Forest.Program.GoalCompleted.getItem(Forest.Goal.DenMadeCozy)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(156,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(157,Forest.Program.eventAndGoalExtraText)]);$step=4;continue;case 4:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleRead:function(words){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,8],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}$step=8;continue;case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);$step=2;continue;case 2:if($t.moveNext()){thing=$t.Current;$step=3;continue}$step=7;continue;case 3:if(thingId=Forest.Program.ThingIdsByName.getItem(thing),thingId===Forest.ThingId.Notes){$step=4;continue}$step=6;continue;case 4:if($task1=Forest.Program.HandleLook(words),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:$task1.getAwaitedResult();$tcs.setResult(null);return;case 6:$step=2;continue;case 8:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(213,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleEat:function(words){var $t,thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thing,thingId,keyWord;if(thingKeysFromCommand.Count>0){$t=Bridge.getEnumerator(thingKeysFromCommand);try{while($t.moveNext()){thing=$t.Current;thingId=Forest.Program.ThingIdsByName.getItem(thing);switch(thingId){case Forest.ThingId.Fish:case Forest.ThingId.Honey:case Forest.ThingId.Berries:case Forest.ThingId.Mushrooms:case Forest.ThingId.Nuts:case Forest.ThingId.Trash:Forest.Program.ThingIsAvailable(thingId)?Forest.Program.EatTheThing(thingId):(keyWord=System.Array.init([Forest.Program.ThingsData.getItem(thingId).Name.toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(211,Forest.Program.eventAndGoalExtraText)],keyWord));return;case Forest.ThingId.Flowers:Forest.Program.HoneyPuzzleStarted?Forest.Program.HaveTriedToEatFlower?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(116,Forest.Program.eventAndGoalExtraText)]):(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(115,Forest.Program.eventAndGoalExtraText)]),Forest.Program.HaveTriedToEatFlower=!0):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(114,Forest.Program.eventAndGoalExtraText)]);return;default:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(114,Forest.Program.eventAndGoalExtraText)]);return}}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}else words.length<2?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(117,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(114,Forest.Program.eventAndGoalExtraText)])},HandleSearch:function(words){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4],$step);switch($step){case 0:if(Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint){$step=1;continue}else{$step=3;continue}case 1:if($task1=Forest.Program.SearchAtViewPoint(words),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:$task1.getAwaitedResult();$step=4;continue;case 3:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(43,Forest.Program.eventAndGoalExtraText)]);$step=4;continue;case 4:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},HandleUse:function(words){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,thingIdsFromCommand,thingKeysFromCommand,$t,thing,thingId,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11],$step);switch($step){case 0:if(thingIdsFromCommand=Forest.Program.GetThingIdsFromWords(words),thingKeysFromCommand=Forest.Program.GetThingKeysFromWords(words,thingIdsFromCommand),thingKeysFromCommand.Count>0){$step=1;continue}else{$step=10;continue}case 1:$t=Bridge.getEnumerator(thingKeysFromCommand);$step=2;continue;case 2:if($t.moveNext()){thing=$t.Current;$step=3;continue}$step=9;continue;case 3:if(thingId=Forest.Program.ThingIdsByName.getItem(thing),!Forest.Program.ThingIsAvailable(thingId)){Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(26,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return}if(thingId===Forest.ThingId.Binoculars){$step=4;continue}else if(thingId===Forest.ThingId.FishingRodLong||thingId===Forest.ThingId.FishingRodOld){$step=6;continue}$step=8;continue;case 4:if($task1=Forest.Program.UseBinoculars(),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:$task1.getAwaitedResult();$tcs.setResult(null);return;case 6:if($task2=Forest.Program.UseFishingRod(),$step=7,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 7:$task2.getAwaitedResult();$tcs.setResult(null);return;case 8:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(26,Forest.Program.eventAndGoalExtraText)]);$step=2;continue;case 9:$step=11;continue;case 10:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(26,Forest.Program.eventAndGoalExtraText)]);$step=11;continue;case 11:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},AskIfPlayerWantToQuit:function(){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,askIfPlayerWantsToQuit,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:if(Console.writeLine(),$task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(203,Forest.Program.eventAndGoalExtraText)]),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:$taskResult1=$task1.getAwaitedResult();askIfPlayerWantsToQuit=$taskResult1;System.Array.contains(askIfPlayerWantsToQuit,"yes",System.String)?(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(204,Forest.Program.eventAndGoalExtraText)]),Forest.Program.quitGame=!0):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(205,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},DisplayInstructions:function(){var $step=0,$task1,$task2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3],$step);switch($step){case 0:if(Console.clear(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(6,Forest.Program.gameStory)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(7,Forest.Program.gameStory)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Console.foregroundColor=Forest.Program.IntroColor,Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(8,Forest.Program.gameStory)]),$task3=Forest.Program.PressEnterToContinueAndClear(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:$task3.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},ApplyGameRules:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,8,10,11,12,13],$step);switch($step){case 0:if(Forest.Program.PreviousLocation!==Forest.Program.CurrentLocationId&&(Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestNorth&&Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestMiddle&&Forest.Program.CurrentLocationId!==Forest.LocationId.LeafyForestSouth?(Forest.Program.ThingIdsByName.setItem("leaves",Forest.ThingId.PileOfLeaves),Forest.Program.ThingIdsByName.setItem("leafs",Forest.ThingId.PileOfLeaves),Forest.Program.ThingIdsByName.setItem("leaf",Forest.ThingId.PileOfLeaves)):Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestMiddle?(Forest.Program.ThingIdsByName.setItem("leaves",Forest.ThingId.OkLeaves),Forest.Program.ThingIdsByName.setItem("leafs",Forest.ThingId.OkLeaves),Forest.Program.ThingIdsByName.setItem("leaf",Forest.ThingId.OkLeaves)):Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestNorth?(Forest.Program.ThingIdsByName.setItem("leaves",Forest.ThingId.OldLeaves),Forest.Program.ThingIdsByName.setItem("leafs",Forest.ThingId.OldLeaves),Forest.Program.ThingIdsByName.setItem("leaf",Forest.ThingId.OldLeaves)):Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestSouth&&(Forest.Program.ThingIdsByName.setItem("leaves",Forest.ThingId.SoftLeaves),Forest.Program.ThingIdsByName.setItem("leafs",Forest.ThingId.SoftLeaves),Forest.Program.ThingIdsByName.setItem("leaf",Forest.ThingId.SoftLeaves)),Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestNorth?Forest.Program.ThingIdsByName.setItem("stick",Forest.ThingId.LongStick):Forest.Program.CurrentLocationId===Forest.LocationId.MossyForestNorth&&Forest.Program.ThingIdsByName.setItem("stick",Forest.ThingId.OldStick),Forest.Program.ThingIsAvailable(Forest.ThingId.Flower)||Forest.Program.CurrentLocationId===Forest.LocationId.BeeForest?(Forest.Program.ThingIdsByName.setItem("flower",Forest.ThingId.Flower),Forest.Program.ThingIdsByName.setItem("flowers",Forest.ThingId.Flower)):(Forest.Program.ThingIdsByName.setItem("flower",Forest.ThingId.Flowers),Forest.Program.ThingIdsByName.setItem("flowers",Forest.ThingId.Flowers)),(Forest.Program.ThingIsHere(Forest.ThingId.Bees)||Forest.Program.ThingIsHere(Forest.ThingId.Bee))&&(Forest.Program.ThingIsHere(Forest.ThingId.Bees)&&Forest.Program.ThingIsHere(Forest.ThingId.Bee)?(Forest.Program.ThingIdsByName.setItem("bee",Forest.ThingId.Bee),Forest.Program.ThingIdsByName.setItem("bees",Forest.ThingId.Bees)):Forest.Program.ThingIsHere(Forest.ThingId.Bees)?(Forest.Program.ThingIdsByName.setItem("bee",Forest.ThingId.Bees),Forest.Program.ThingIdsByName.setItem("bees",Forest.ThingId.Bees)):(Forest.Program.ThingIdsByName.setItem("bee",Forest.ThingId.Bee),Forest.Program.ThingIdsByName.setItem("bees",Forest.ThingId.Bee))),Forest.Program.PreviousLocation=Forest.Program.CurrentLocationId),!Forest.Program.GoalCompleted.getItem(Forest.Goal.DenMadeCozy)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.DenCleaned)){$step=1;continue}$step=10;continue;case 1:if(Forest.Program.ThingsInDen.Count>Forest.Program.PreviousThingsInDen.Count){$step=2;continue}$step=9;continue;case 2:if(Forest.Program.ThingsInDen.Count===1||Forest.Program.ThingsInDen.Count===2){$step=3;continue}else{$step=4;continue}case 3:Forest.Program.LookAtDen();$step=8;continue;case 4:if(Forest.Program.ThingsInDen.Count===3){$step=5;continue}$step=7;continue;case 5:if($task1=Forest.Program.DenGoalCompleted(),$step=6,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 6:$task1.getAwaitedResult();$step=7;continue;case 8:Forest.Program.ThingsInDen.contains(Forest.ThingId.SoftLeaves)&&(Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.OkLeaves),Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.OldLeaves),Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.SoftLeaves));Forest.Program.ThingsInDen.contains(Forest.ThingId.Moss)&&Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.Moss);Forest.Program.ThingsInDen.contains(Forest.ThingId.Grass)&&Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.Grass);Forest.Program.PreviousThingsInDen.clear();Forest.Program.PreviousThingsInDen.AddRange(Forest.Program.ThingsInDen);$step=9;continue;case 10:if(Forest.Program.HaveTriedToEatFlower&&Forest.Program.ThingAt(Forest.ThingId.Honey,Forest.LocationId.Nowhere)&&(Forest.Program.MoveThing(Forest.ThingId.Honey,Forest.LocationId.Nowhere,Forest.LocationId.Den),Forest.Program.GoalCompleted.setItem(Forest.Goal.BeenGiftedHoney,!0)),!Forest.Program.GoalCompleted.getItem(Forest.Goal.TimeToRelax)&&Forest.Program.HaveTriedToSwimOverRiver&&Forest.Program.GoalCompleted.getItem(Forest.Goal.DenMadeCozy)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.BeenGiftedHoney)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.CaughtFish)&&Forest.Program.GoalCompleted.setItem(Forest.Goal.TimeToRelax,!0),!Forest.Program.GoalCompleted.getItem(Forest.Goal.HaveRelaxed)&&Forest.Program.GoalCompleted.getItem(Forest.Goal.TimeToRelax)&&Forest.Program.CurrentLocationId===Forest.LocationId.SouthEastForest){$step=11;continue}$step=13;continue;case 11:if($task2=Forest.Program.Relax(),$step=12,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 12:$task2.getAwaitedResult();$step=13;continue;case 13:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},EndGame:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9],$step);switch($step){case 0:if(Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(183,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(184,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(185,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(186,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(187,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:if($task5.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(188,Forest.Program.eventAndGoalExtraText)]),$task6=Forest.Program.PressEnterToContinue(),$step=6,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 6:if($task6.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(189,Forest.Program.eventAndGoalExtraText)]),$task7=Forest.Program.PressEnterToContinue(),$step=7,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 7:if($task7.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(190,Forest.Program.eventAndGoalExtraText)]),$task8=Forest.Program.PressEnterToContinueAndClear(),$step=8,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 8:if($task8.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(191,Forest.Program.eventAndGoalExtraText)]),$task9=Forest.Program.PressEnterToContinueAndClear(),$step=9,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 9:$task9.getAwaitedResult();Forest.Program.quitGame=!0;$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},LookAtDen:function(){var keyWords,keyWords1;Forest.Program.ThingsInDen.Count===1?(keyWords=System.Array.init([Forest.Program.GetThingName(Forest.Program.ThingsInDen.getItem(0)).toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(15,Forest.Program.eventAndGoalExtraText)],keyWords)):Forest.Program.ThingsInDen.Count===2?(keyWords1=System.Array.init([Forest.Program.GetThingName(Forest.Program.ThingsInDen.getItem(0)).toLowerCase(),Forest.Program.GetThingName(Forest.Program.ThingsInDen.getItem(1)).toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(16,Forest.Program.eventAndGoalExtraText)],keyWords1)):Forest.Program.ThingsInDen.Count===3?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(25,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.Dirt).Description)},DropThingInDen:function(thingId){var $t;Forest.Program.CurrentLocationId===Forest.LocationId.Den?Forest.Program.GoalCompleted.getItem(Forest.Goal.DenCleaned)?thingId===Forest.ThingId.PileOfLeaves?(Forest.Program.LoseThing(thingId),Forest.Program.ThingsInDen.add(Forest.ThingId.SoftLeaves)):(Forest.Program.LoseThing(thingId),Forest.Program.ThingsInDen.add(thingId)):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(6,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(5,$t)])},DenGoalCompleted:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5],$step);switch($step){case 0:if(Forest.Program.GoalCompleted.setItem(Forest.Goal.DenMadeCozy,!0),Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(17,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(18,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(19,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(20,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(21,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:$task5.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},PickUpGrassAndGetFlower:function(){Forest.Program.GetThing(Forest.ThingId.Grass);Forest.Program.GetThing(Forest.ThingId.Flower);Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(102,Forest.Program.eventAndGoalExtraText)])},DropPileOfLeavesOutsideOfDen:function(){var $t;(Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestNorth||Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestMiddle||Forest.Program.CurrentLocationId===Forest.LocationId.LeafyForestSouth)&&(Forest.Program.HaveThing(Forest.ThingId.PileOfLeaves)?(Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.PileOfLeaves).Answers)[System.Array.index(6,$t)]),Forest.Program.LoseLeafPile()):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(36,Forest.Program.eventAndGoalExtraText)]))},PickUpLeaves:function(thingId){var $t,keyWords,keyWords1,keyWords2;Forest.Program.ThingsInPileOfLeaves.contains(thingId)?(keyWords=System.Array.init([Forest.Program.GetThingName(thingId).toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(7,Forest.Program.eventAndGoalExtraText)],keyWords)):(Forest.Program.ThingsCurrentLocations.getItem(Forest.ThingId.PileOfLeaves).contains(Forest.LocationId.Inventory)||Forest.Program.GetThing(Forest.ThingId.PileOfLeaves),Forest.Program.ThingsInPileOfLeaves.add(thingId),Forest.Program.Print(($t=Forest.Program.ThingsData.getItem(thingId).Answers)[System.Array.index(0,$t)]),Forest.Program.ThingsInPileOfLeaves.Count===2?(keyWords1=System.Array.init([Forest.Program.GetThingName(Forest.Program.ThingsInPileOfLeaves.getItem(1)).toLowerCase(),Forest.Program.GetThingName(Forest.Program.ThingsInPileOfLeaves.getItem(0)).toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(8,Forest.Program.eventAndGoalExtraText)],keyWords1)):Forest.Program.ThingsInPileOfLeaves.Count===3?(keyWords2=System.Array.init([Forest.Program.GetThingName(Forest.Program.ThingsInPileOfLeaves.getItem(0)).toLowerCase(),Forest.Program.GetThingName(Forest.Program.ThingsInPileOfLeaves.getItem(1)).toLowerCase(),Forest.Program.GetThingName(Forest.Program.ThingsInPileOfLeaves.getItem(2)).toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(9,Forest.Program.eventAndGoalExtraText)],keyWords2)):Console.writeLine())},LoseLeafPile:function(){Forest.Program.LoseThing(Forest.ThingId.PileOfLeaves);Forest.Program.ThingsInPileOfLeaves.clear()},LoseLeavesWhenGoingDownWaterSlide:function(){var $step=0,$task1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3],$step);switch($step){case 0:if(Forest.Program.HaveThing(Forest.ThingId.PileOfLeaves)){$step=1;continue}$step=3;continue;case 1:if($task1=Forest.Program.PressEnterToContinue(),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:$task1.getAwaitedResult();Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(27,Forest.Program.eventAndGoalExtraText)]);Forest.Program.LoseLeafPile();$step=3;continue;case 3:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},BringLeavesToDen:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2],$step);switch($step){case 0:if(Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(35,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),System.Linq.Enumerable.from(Forest.Program.ThingsInPileOfLeaves,Forest.ThingId).count()===3?Forest.Program.ThingsInPileOfLeaves.getItem(0)===Forest.ThingId.SoftLeaves&&Forest.Program.ThingsInPileOfLeaves.getItem(1)===Forest.ThingId.OkLeaves&&Forest.Program.ThingsInPileOfLeaves.getItem(2)===Forest.ThingId.OldLeaves?(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(14,Forest.Program.eventAndGoalExtraText)]),Forest.Program.ThingsInPileOfLeaves.remove(Forest.ThingId.OldLeaves),Forest.Program.ThingsInPileOfLeaves.remove(Forest.ThingId.OkLeaves)):(Forest.Program.ThingsInPileOfLeaves.getItem(2)===Forest.ThingId.SoftLeaves?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(29,Forest.Program.eventAndGoalExtraText)]):Forest.Program.ThingsInPileOfLeaves.getItem(0)===Forest.ThingId.SoftLeaves?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(30,Forest.Program.eventAndGoalExtraText)]):Forest.Program.ThingsInPileOfLeaves.getItem(0)===Forest.ThingId.OldLeaves?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(31,Forest.Program.eventAndGoalExtraText)]):Forest.Program.ThingsInPileOfLeaves.getItem(0)===Forest.ThingId.OkLeaves&&Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(32,Forest.Program.eventAndGoalExtraText)]),Forest.Program.LoseLeafPile()):System.Linq.Enumerable.from(Forest.Program.ThingsInPileOfLeaves,Forest.ThingId).count()===2?(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(33,Forest.Program.eventAndGoalExtraText)]),Forest.Program.LoseLeafPile()):(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(34,Forest.Program.eventAndGoalExtraText)]),Forest.Program.LoseLeafPile()),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:$task2.getAwaitedResult();Forest.Program.MovePlayerToNewLocation(Forest.LocationId.Den);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},StartFishingPuzzle:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5],$step);switch($step){case 0:if(Forest.Program.FishingPuzzleStarted){$step=4;continue}else{$step=1;continue}case 1:if(Console.clear(),Forest.Program.FishingPuzzleStarted=!0,Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(97,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(98,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=3,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 3:$task2.getAwaitedResult();Forest.Program.DisplayNewLocation();$step=5;continue;case 4:Forest.Program.ListOfEatenThings.contains(Forest.ThingId.Fish)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(212,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(100,Forest.Program.eventAndGoalExtraText)]);$step=5;continue;case 5:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},UseFishingRod:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$task10,$task11,$task12,$task13,$task14,$task15,$task16,$task17,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,fishingRod,stick,stickName,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,23,24,25],$step);switch($step){case 0:if(Forest.Program.CurrentLocationId===Forest.LocationId.EastRiver){$step=1;continue}else{$step=24;continue}case 1:if(Console.clear(),fishingRod=Forest.ThingId.FishingRodLong,stick=Forest.ThingId.LongStick,Forest.Program.HaveThing(Forest.ThingId.FishingRodOld)&&(fishingRod=Forest.ThingId.FishingRodOld,stick=Forest.ThingId.OldStick),stickName=System.Array.init([Forest.Program.ThingsData.getItem(stick).Name.toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(81,Forest.Program.eventAndGoalExtraText)],stickName),$task1=Forest.Program.PressEnterToContinue(),$step=2,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 2:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(82,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=3,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 3:if($task2.getAwaitedResult(),fishingRod===Forest.ThingId.FishingRodLong){$step=4;continue}else{$step=13;continue}case 4:if(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(83,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=5,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 5:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(84,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=6,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 6:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(85,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=7,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 7:if($task5.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(83,Forest.Program.eventAndGoalExtraText)]),$task6=Forest.Program.PressEnterToContinue(),$step=8,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 8:if($task6.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(101,Forest.Program.eventAndGoalExtraText)]),$task7=Forest.Program.PressEnterToContinue(),$step=9,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 9:if($task7.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(101,Forest.Program.eventAndGoalExtraText)]),$task8=Forest.Program.PressEnterToContinue(),$step=10,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 10:if($task8.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(101,Forest.Program.eventAndGoalExtraText)]),$task9=Forest.Program.PressEnterToContinue(),$step=11,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 11:if($task9.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(86,Forest.Program.eventAndGoalExtraText)]),$task10=Forest.Program.PressEnterToContinue(),$step=12,$task10.isCompleted())continue;$task10.continue($asyncBody);return;case 12:$task10.getAwaitedResult();$step=22;continue;case 13:if(fishingRod===Forest.ThingId.FishingRodOld){$step=14;continue}$step=21;continue;case 14:if(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(87,Forest.Program.eventAndGoalExtraText)]),$task11=Forest.Program.PressEnterToContinue(),$step=15,$task11.isCompleted())continue;$task11.continue($asyncBody);return;case 15:if($task11.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(88,Forest.Program.eventAndGoalExtraText)]),$task12=Forest.Program.PressEnterToContinue(),$step=16,$task12.isCompleted())continue;$task12.continue($asyncBody);return;case 16:if($task12.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(89,Forest.Program.eventAndGoalExtraText)]),$task13=Forest.Program.PressEnterToContinue(),$step=17,$task13.isCompleted())continue;$task13.continue($asyncBody);return;case 17:if($task13.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(90,Forest.Program.eventAndGoalExtraText)]),$task14=Forest.Program.PressEnterToContinue(),$step=18,$task14.isCompleted())continue;$task14.continue($asyncBody);return;case 18:if($task14.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(91,Forest.Program.eventAndGoalExtraText)]),$task15=Forest.Program.PressEnterToContinue(),$step=19,$task15.isCompleted())continue;$task15.continue($asyncBody);return;case 19:if($task15.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(92,Forest.Program.eventAndGoalExtraText)]),$task16=Forest.Program.PressEnterToContinue(),$step=20,$task16.isCompleted())continue;$task16.continue($asyncBody);return;case 20:$task16.getAwaitedResult();$step=21;continue;case 22:if(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(93,Forest.Program.eventAndGoalExtraText)]),$task17=Forest.Program.PressEnterToContinue(),$step=23,$task17.isCompleted())continue;$task17.continue($asyncBody);return;case 23:$task17.getAwaitedResult();Forest.Program.GetOneAndLoseOneThing(Forest.ThingId.Fish,fishingRod);Forest.Program.GoalCompleted.setItem(Forest.Goal.CaughtFish,!0);Forest.Program.DisplayNewLocation();$step=25;continue;case 24:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(96,Forest.Program.eventAndGoalExtraText)]);$step=25;continue;case 25:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},LookAtTrash:function(){var $t,number,number1,number2;Forest.Program.ThingIsAvailable(Forest.ThingId.Trash)?Forest.Program.HaveThing(Forest.ThingId.Trash)&&!Forest.Program.ThingIsHere(Forest.ThingId.Trash)?System.Linq.Enumerable.from(Forest.Program.PileOfTrash,Forest.ThingId).count()===1?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(56,Forest.Program.eventAndGoalExtraText)]):(number=System.Array.init([Bridge.toString(System.Linq.Enumerable.from(Forest.Program.PileOfTrash,Forest.ThingId).count())],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(51,Forest.Program.eventAndGoalExtraText)],number)):Forest.Program.ThingIsHere(Forest.ThingId.Trash)&&!Forest.Program.HaveThing(Forest.ThingId.Trash)?Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(54,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(52,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint?(number1=System.Array.init([Bridge.toString(System.Linq.Enumerable.from(Forest.Program.PileOfTrash,Forest.ThingId).count())],System.String),Forest.Program.PileOfTrash.Count>1?Forest.Program.InsertKeyWordAndDisplay((Forest.Program.eventAndGoalExtraText[System.Array.index(51,Forest.Program.eventAndGoalExtraText)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(55,Forest.Program.eventAndGoalExtraText)]||""),number1):Forest.Program.Reply((Forest.Program.eventAndGoalExtraText[System.Array.index(56,Forest.Program.eventAndGoalExtraText)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(55,Forest.Program.eventAndGoalExtraText)]||""))):(number2=System.Array.init([Bridge.toString(System.Linq.Enumerable.from(Forest.Program.PileOfTrash,Forest.ThingId).count())],System.String),Forest.Program.PileOfTrash.Count>1?Forest.Program.InsertKeyWordAndDisplay((Forest.Program.eventAndGoalExtraText[System.Array.index(51,Forest.Program.eventAndGoalExtraText)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(53,Forest.Program.eventAndGoalExtraText)]||""),number2):Forest.Program.Reply((Forest.Program.eventAndGoalExtraText[System.Array.index(56,Forest.Program.eventAndGoalExtraText)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(53,Forest.Program.eventAndGoalExtraText)]||""))):Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Trash).Answers)[System.Array.index(2,$t)])},PickUpTrash:function(){var $t;if(Forest.Program.PileOfTrash.add(Forest.ThingId.Trash),Forest.Program.HaveThing(Forest.ThingId.Trash)){var random1=new System.Random.ctor,randomTrash1=random1.Next$2(0,System.Linq.Enumerable.from(Forest.Program.TypesOfTrash,System.String).count()),typeAndAmountOfTrash=System.Array.init([Forest.Program.TypesOfTrash.getItem(randomTrash1),Bridge.toString(System.Linq.Enumerable.from(Forest.Program.PileOfTrash,Forest.ThingId).count())],System.String);Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(41,Forest.Program.eventAndGoalExtraText)],typeAndAmountOfTrash)}else{Forest.Program.GetThing(Forest.ThingId.Trash);var random=new System.Random.ctor,randomTrash=random.Next$2(0,System.Linq.Enumerable.from(Forest.Program.TypesOfTrash,System.String).count()),typeOfTrash=System.Array.init([Forest.Program.TypesOfTrash.getItem(randomTrash)],System.String);Forest.Program.InsertKeyWordAndDisplay(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Trash).Answers)[System.Array.index(0,$t)],typeOfTrash)}Forest.Program.CurrentLocationId!==Forest.LocationId.ViewPoint&&Forest.Program.RemoveThingFromLocation(Forest.ThingId.Trash)},DropTrash:function(){var $t,$t1,$t2;Forest.Program.CurrentLocationId===Forest.LocationId.ViewPoint||Forest.Program.CurrentLocationId===Forest.LocationId.Waterfall?(Forest.Program.PileOfTrash.clear(),Forest.Program.LoseThing(Forest.ThingId.Trash),Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Trash).Answers)[System.Array.index(6,$t)])):Forest.Program.PileOfTrash.Count>1?(Forest.Program.AddThingToLocation(Forest.ThingId.Trash),Forest.Program.PileOfTrash.remove(Forest.ThingId.Trash),Forest.Program.Reply(($t1=Forest.Program.ThingsData.getItem(Forest.ThingId.Trash).Answers)[System.Array.index(4,$t1)])):(Forest.Program.DropThing(Forest.ThingId.Trash),Forest.Program.PileOfTrash.remove(Forest.ThingId.Trash),Forest.Program.Reply((($t2=Forest.Program.ThingsData.getItem(Forest.ThingId.Trash).Answers)[System.Array.index(4,$t2)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(42,Forest.Program.eventAndGoalExtraText)]||"")))},SearchAtViewPoint:function(words){var $step=0,$task1,$taskResult1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$t,word,newWords,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5],$step);switch($step){case 0:$t=Bridge.getEnumerator(words);try{while($t.moveNext())if(word=$t.Current,Forest.Program.ThingsToSearch.contains(word)){Forest.Program.GetTrashOrRope();$tcs.setResult(null);return}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(words.length>1){$step=1;continue}else{$step=2;continue}case 1:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(39,Forest.Program.eventAndGoalExtraText)]);$step=5;continue;case 2:if(Console.writeLine(),$task1=Forest.Program.AskForInput(Forest.Program.eventAndGoalExtraText[System.Array.index(37,Forest.Program.eventAndGoalExtraText)]),$step=3,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 3:if($taskResult1=$task1.getAwaitedResult(),newWords=$taskResult1,$task2=Forest.Program.SearchAtViewPoint(newWords),$step=4,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 4:$task2.getAwaitedResult();$step=5;continue;case 5:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},GetTrashOrRope:function(){var $t,random,chanceForRope;if(Forest.Program.PiecesOfTrashCollected>=10&&Forest.Program.HaveThing(Forest.ThingId.Rope)){Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(40,Forest.Program.eventAndGoalExtraText)]);return}else Forest.Program.PiecesOfTrashCollected>=2&&!Forest.Program.HaveThing(Forest.ThingId.Rope)?(random=new System.Random.ctor,chanceForRope=random.Next$2(0,8-Math.min(Forest.Program.PiecesOfTrashCollected,7)|0),chanceForRope===0?(Forest.Program.GetThing(Forest.ThingId.Rope),Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Rope).Answers)[System.Array.index(0,$t)])):(Forest.Program.PickUpTrash(),Forest.Program.PiecesOfTrashCollected=Forest.Program.PiecesOfTrashCollected+1|0)):(Forest.Program.PickUpTrash(),Forest.Program.PiecesOfTrashCollected=Forest.Program.PiecesOfTrashCollected+1|0)},UseBinoculars:function(){var $step=0,$task1,$taskResult1,$task2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,newWords,newInput,isValidInput,key,word,words,$t,word1,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,12,13,14],$step);switch($step){case 0:newWords="";newInput=!0;isValidInput=!1;Console.clear();Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(57,Forest.Program.eventAndGoalExtraText)]);$step=1;continue;case 1:if(System.Linq.Enumerable.from(Forest.Program.EnteredArrows,System.String).count()<System.Linq.Enumerable.from(Forest.Program.CorrectArrows,System.String).count()){$step=2;continue}$step=13;continue;case 2:if(newInput&&(newInput=!1,isValidInput=!1,Console.foregroundColor=Forest.Program.NarrativeColor,Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(62,Forest.Program.eventAndGoalExtraText)]),Console.foregroundColor=Forest.Program.PromptColor,Console.write("> ")),$task1=Console.readKey(),$step=3,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 3:if($taskResult1=$task1.getAwaitedResult(),key=$taskResult1.key,key===ConsoleKey.leftArrow||key===ConsoleKey.rightArrow||key===ConsoleKey.upArrow||key===ConsoleKey.downArrow){$step=4;continue}else{$step=5;continue}case 4:word=System.String.remove(System.Enum.toString(ConsoleKey,key),System.Enum.toString(ConsoleKey,key).length-5|0);Forest.Program.MoveBinoculars(word.toLowerCase());newInput=!0;$step=12;continue;case 5:if(key===ConsoleKey.enter){$step=6;continue}else{$step=10;continue}case 6:words=Forest.Program.SplitCommand(newWords.toLowerCase());newWords="";$t=Bridge.getEnumerator(words);try{while($t.moveNext())if(word1=$t.Current,Forest.Program.CorrectArrows.contains(word1))Forest.Program.MoveBinoculars(word1),isValidInput=!0,newInput=!0;else{isValidInput=!1;break}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}if(!isValidInput){$step=7;continue}$step=9;continue;case 7:if(Console.writeLine(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(63,Forest.Program.eventAndGoalExtraText)]),Forest.Program.EnteredArrows.clear(),$task2=Forest.Program.PressEnterToContinue(),$step=8,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 8:$task2.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;case 9:$step=11;continue;case 10:key===ConsoleKey.spacebar?newWords=(newWords||"")+" ":key===ConsoleKey.backspace?newWords.length>0&&(newWords=System.String.remove(newWords,newWords.length-1|0),Console.cursorLeft=Console.cursorLeft-1|0,Console.write(" "),Console.cursorLeft=Console.cursorLeft-1|0):newWords=(newWords||"")+System.Enum.toString(ConsoleKey,key);$step=11;continue;case 12:$step=1;continue;case 13:if(System.Linq.Enumerable.from(Forest.Program.EnteredArrows,System.String).sequenceEqual(Forest.Program.CorrectArrows)?(Forest.Program.HiddenPathFound?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(66,Forest.Program.eventAndGoalExtraText)]):(Forest.Program.LocationsData.getItem(Forest.LocationId.Waterfall).Directions.setItem(Forest.Direction.North,Forest.LocationId.SouthEastForest),Forest.Program.HiddenPathFound=!0,Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(65,Forest.Program.eventAndGoalExtraText)])),Forest.Program.EnteredArrows.clear()):(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(64,Forest.Program.eventAndGoalExtraText)]),Forest.Program.EnteredArrows.clear()),$task3=Forest.Program.PressEnterToContinue(),$step=14,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 14:$task3.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},MoveBinoculars:function(word){Forest.Program.EnteredArrows.add(word);Console.cursorLeft=0;Console.writeLine("> "+(System.String.alignString(Bridge.toString(word),-(((Console.windowWidth-word.length|0)-3|0)-1|0),32)||""));System.String.contains(word,"left")?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(58,Forest.Program.eventAndGoalExtraText)]):System.String.contains(word,"right")?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(59,Forest.Program.eventAndGoalExtraText)]):System.String.contains(word,"up")?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(60,Forest.Program.eventAndGoalExtraText)]):System.String.contains(word,"down")&&Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(61,Forest.Program.eventAndGoalExtraText)])},FindNail:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5],$step);switch($step){case 0:if(Forest.Program.LocationsData.getItem(Forest.LocationId.SouthEastForest).Directions.setItem(Forest.Direction.South,Forest.LocationId.Waterfall),Forest.Program.NailFound=!0,Forest.Program.GetThing(Forest.ThingId.Nail),Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(71,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(72,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(73,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(74,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(75,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:$task5.getAwaitedResult();Forest.Program.MovePlayerToNewLocation(Forest.LocationId.SouthEastForest);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},CombineToFishingRod:function(){var $step=0,$task1,$task2,$taskResult2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,choosenStick,choosenStickName,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8],$step);switch($step){case 0:if(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(78,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinueAndClear(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(79,Forest.Program.eventAndGoalExtraText)]),Forest.Program.LoseThing(Forest.ThingId.Nail),Forest.Program.LoseThing(Forest.ThingId.Rope),choosenStick=Forest.ThingId.Placeholder,Forest.Program.HaveThing(Forest.ThingId.LongStick)&&Forest.Program.HaveThing(Forest.ThingId.OldStick)){$step=2;continue}else{$step=6;continue}case 2:if(choosenStick===Forest.ThingId.Placeholder){$step=3;continue}$step=5;continue;case 3:if($task2=Forest.Program.AskWitchStick(),$step=4,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 4:$taskResult2=$task2.getAwaitedResult();choosenStick=$taskResult2;choosenStick===Forest.ThingId.Placeholder&&Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(127,Forest.Program.eventAndGoalExtraText)]);$step=2;continue;case 5:$step=7;continue;case 6:Forest.Program.HaveThing(Forest.ThingId.LongStick)?choosenStick=Forest.ThingId.LongStick:Forest.Program.HaveThing(Forest.ThingId.OldStick)&&(choosenStick=Forest.ThingId.OldStick);$step=7;continue;case 7:if(Forest.Program.LoseThing(choosenStick),choosenStickName=System.Array.init([Forest.Program.ThingsData.getItem(choosenStick).Name.toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(80,Forest.Program.eventAndGoalExtraText)],choosenStickName),choosenStick===Forest.ThingId.OldStick?(Forest.Program.GetThing(Forest.ThingId.FishingRodOld),Forest.Program.ThingIdsByName.setItem("rod",Forest.ThingId.FishingRodOld),Forest.Program.ThingIdsByName.setItem("fishing rod",Forest.ThingId.FishingRodOld)):choosenStick===Forest.ThingId.LongStick&&(Forest.Program.GetThing(Forest.ThingId.FishingRodLong),Forest.Program.ThingIdsByName.setItem("rod",Forest.ThingId.FishingRodLong),Forest.Program.ThingIdsByName.setItem("fishing rod",Forest.ThingId.FishingRodLong)),$task3=Forest.Program.PressEnterToContinue(),$step=8,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 8:$task3.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},LookAtStick:function(words){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,choosenStick,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,7],$step);switch($step){case 0:if(System.Array.contains(words,"old stick",System.String)&&Forest.Program.ThingIsAvailable(Forest.ThingId.OldStick)||System.Array.contains(words,"long stick",System.String)&&Forest.Program.ThingIsAvailable(Forest.ThingId.LongStick)){$step=1;continue}else{$step=2;continue}case 1:System.Array.contains(words,"old stick",System.String)?Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.OldStick).Description):Forest.Program.HaveThing(Forest.ThingId.LongStick)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(209,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.LongStick).Description);$step=7;continue;case 2:if(Forest.Program.ThingIsAvailable(Forest.ThingId.OldStick)&&Forest.Program.ThingIsAvailable(Forest.ThingId.LongStick)){$step=3;continue}else{$step=5;continue}case 3:if($task1=Forest.Program.AskWitchStick(),$step=4,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 4:if($taskResult1=$task1.getAwaitedResult(),choosenStick=$taskResult1,choosenStick===Forest.ThingId.Placeholder){$tcs.setResult(null);return}choosenStick===Forest.ThingId.OldStick?Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.OldStick).Description):Forest.Program.HaveThing(Forest.ThingId.LongStick)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(209,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.LongStick).Description);$step=6;continue;case 5:Forest.Program.ThingIsAvailable(Forest.ThingId.OldStick)?Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.OldStick).Description):Forest.Program.ThingIsAvailable(Forest.ThingId.LongStick)?Forest.Program.HaveThing(Forest.ThingId.LongStick)?Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(209,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Reply(Forest.Program.ThingsData.getItem(Forest.ThingId.LongStick).Description):Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(46,Forest.Program.eventAndGoalExtraText)]);$step=6;continue;case 7:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},DropStick:function(words){var $step=0,$task1,$taskResult1,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$t,$t1,choosenStick,$t2,$t3,$t4,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,8],$step);switch($step){case 0:if(System.Array.contains(words,"old stick",System.String)&&Forest.Program.HaveThing(Forest.ThingId.OldStick)||System.Array.contains(words,"long stick",System.String)&&Forest.Program.HaveThing(Forest.ThingId.LongStick)){$step=1;continue}else{$step=2;continue}case 1:System.Array.contains(words,"old stick",System.String)?(Forest.Program.LoseThing(Forest.ThingId.OldStick),Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.OldStick).Answers)[System.Array.index(6,$t)])):(Forest.Program.LoseThing(Forest.ThingId.LongStick),Forest.Program.Reply(($t1=Forest.Program.ThingsData.getItem(Forest.ThingId.LongStick).Answers)[System.Array.index(6,$t1)]));$tcs.setResult(null);return;case 2:if(Forest.Program.HaveThing(Forest.ThingId.OldStick)||Forest.Program.HaveThing(Forest.ThingId.LongStick)){$step=3;continue}$step=7;continue;case 3:if(Forest.Program.HaveThing(Forest.ThingId.OldStick)&&Forest.Program.HaveThing(Forest.ThingId.LongStick)){$step=4;continue}$step=6;continue;case 4:if($task1=Forest.Program.AskWitchStick(),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:if($taskResult1=$task1.getAwaitedResult(),choosenStick=$taskResult1,choosenStick===Forest.ThingId.Placeholder){$tcs.setResult(null);return}Forest.Program.LoseThing(choosenStick);Forest.Program.Reply(($t2=Forest.Program.ThingsData.getItem(choosenStick).Answers)[System.Array.index(6,$t2)]);$tcs.setResult(null);return;case 6:Forest.Program.HaveThing(Forest.ThingId.OldStick)?(Forest.Program.LoseThing(Forest.ThingId.OldStick),Forest.Program.Reply(($t3=Forest.Program.ThingsData.getItem(Forest.ThingId.OldStick).Answers)[System.Array.index(6,$t3)])):(Forest.Program.LoseThing(Forest.ThingId.LongStick),Forest.Program.Reply(($t4=Forest.Program.ThingsData.getItem(Forest.ThingId.LongStick).Answers)[System.Array.index(6,$t4)]));$tcs.setResult(null);return;case 8:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(36,Forest.Program.eventAndGoalExtraText)]);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},MoveBee:function(newLocation){Forest.Program.ThingsCurrentLocations.getItem(Forest.ThingId.Bee).contains(Forest.Program.CurrentLocationId)&&Forest.Program.HaveThing(Forest.ThingId.Flower)&&Forest.Program.MoveThing(Forest.ThingId.Bee,Forest.Program.CurrentLocationId,newLocation);Forest.Program.ThingsCurrentLocations.getItem(Forest.ThingId.Bee).contains(Forest.LocationId.BeeForest)&&(Forest.Program.BeeHasBeenInBeeForest=!0)},DropFlower:function(){var $t,$t1,$t2;Forest.Program.CurrentLocationId===Forest.LocationId.BeeForest?(Forest.Program.DropThing(Forest.ThingId.Flower),Forest.Program.ThingsCurrentLocations.getItem(Forest.ThingId.Bee).contains(Forest.LocationId.BeeForest)?(Forest.Program.Reply((($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Flower).Answers)[System.Array.index(4,$t)]||"")+" "+(Forest.Program.eventAndGoalExtraText[System.Array.index(108,Forest.Program.eventAndGoalExtraText)]||"")),Forest.Program.ThingsYouCanGet.remove(Forest.ThingId.Flower),Forest.Program.BeeIsHome=!0):Forest.Program.Reply(($t1=Forest.Program.ThingsData.getItem(Forest.ThingId.Flower).Answers)[System.Array.index(4,$t1)])):Forest.Program.Reply(($t2=Forest.Program.ThingsData.getItem(Forest.ThingId.Flower).Answers)[System.Array.index(5,$t2)])},GetIdeaAboutHoney:function(){var $step=0,$task1,$task2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3],$step);switch($step){case 0:if(Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(110,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(111,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(112,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:$task3.getAwaitedResult();Forest.Program.HoneyPuzzleStarted=!0;Forest.Program.MovePlayerToNewLocation(Forest.LocationId.Glade);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},SwimOverRiver:function(){var $step=0,$task1,$task2,$task3,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,20],$step);switch($step){case 0:if(Forest.Program.HaveTriedToSwimOverRiver){$step=1;continue}else{$step=16;continue}case 1:if(Forest.Program.CurrentShape===Forest.ThingId.ShapeBear){$step=2;continue}else{$step=14;continue}case 2:if(Forest.Program.GoalCompleted.getItem(Forest.Goal.EnoughFoodConsumed)){$step=3;continue}else{$step=12;continue}case 3:if(Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)&&Forest.Program.FirstTimeSwimingOverRiver){$step=4;continue}else{$step=6;continue}case 4:if(Forest.Program.FirstTimeSwimingOverRiver=!1,Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(119,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=5,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 5:$task1.getAwaitedResult();Forest.Program.MovePlayerToNewLocation(Forest.LocationId.Cliffs);$step=11;continue;case 6:if(Forest.Program.FirstTimeSwimingOverRiver){$step=7;continue}else{$step=9;continue}case 7:if(Forest.Program.FirstTimeSwimingOverRiver=!1,Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(199,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=8,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 8:$task2.getAwaitedResult();Forest.Program.MovePlayerToNewLocation(Forest.LocationId.Cliffs);$step=10;continue;case 9:Forest.Program.MovePlayerToNewLocation(Forest.LocationId.Cliffs);$step=10;continue;case 11:$step=13;continue;case 12:Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(121,Forest.Program.eventAndGoalExtraText)]);$step=13;continue;case 13:$step=15;continue;case 14:Forest.Program.CurrentShape===Forest.ThingId.ShapeSquirrel&&Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(192,Forest.Program.eventAndGoalExtraText)]);$step=15;continue;case 15:$step=20;continue;case 16:if(!Forest.Program.HaveTriedToSwimOverRiver){$step=17;continue}$step=19;continue;case 17:if($task3=Forest.Program.StartSwimPuzzle(),$step=18,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 18:$task3.getAwaitedResult();$step=19;continue;case 20:$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},StartSwimPuzzle:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2],$step);switch($step){case 0:if(Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(122,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinue(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(123,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:$task2.getAwaitedResult();Forest.Program.MoveThing(Forest.ThingId.Berries,Forest.LocationId.Nowhere,Forest.LocationId.LeafyForestSouth);Forest.Program.MoveThing(Forest.ThingId.Mushrooms,Forest.LocationId.Nowhere,Forest.LocationId.MossyForestSouth);Forest.Program.MoveThing(Forest.ThingId.Nuts,Forest.LocationId.Nowhere,Forest.LocationId.SparseForest);Forest.Program.HaveTriedToSwimOverRiver=!0;Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},EatTheThing:function(thingId){var $t,$t1,thing,thing1,eatenThings,thing2;if(Forest.Program.ListOfEatenThings.contains(thingId)&&thingId!==Forest.ThingId.Fish)thing=System.Array.init([Forest.Program.ThingsData.getItem(thingId).Name.toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(130,Forest.Program.eventAndGoalExtraText)],thing),thingId===Forest.ThingId.Trash&&(Forest.Program.PileOfTrash.remove(Forest.ThingId.Trash),Forest.Program.PileOfTrash.Count<1&&Forest.Program.LoseThing(Forest.ThingId.Trash));else if(thingId===Forest.ThingId.Fish&&Forest.Program.HaveThing(Forest.ThingId.Fish)||thingId!==Forest.ThingId.Fish)Forest.Program.ListOfEatenThings.add(thingId),thing1=System.Array.init([Forest.Program.ThingsData.getItem(thingId).Name.toLowerCase()],System.String),Forest.Program.InsertKeyWordAndDisplay(Forest.Program.eventAndGoalExtraText[System.Array.index(129,Forest.Program.eventAndGoalExtraText)],thing1),thingId===Forest.ThingId.Fish&&Forest.Program.LoseThing(thingId),thingId===Forest.ThingId.Trash&&(Forest.Program.PileOfTrash.remove(Forest.ThingId.Trash),Forest.Program.PileOfTrash.Count<1&&Forest.Program.LoseThing(Forest.ThingId.Trash));else{Forest.Program.Reply(($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Fish).Answers)[System.Array.index(7,$t)]);return}if(Forest.Program.ListOfEatenThings.Count>1){eatenThings=new(System.Collections.Generic.List$1(System.String).ctor);$t1=Bridge.getEnumerator(Forest.Program.ListOfEatenThings);try{while($t1.moveNext())thing2=$t1.Current,eatenThings.add(Forest.Program.ThingsData.getItem(thing2).Name.toLowerCase())}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}eatenThings.setItem(0,Forest.Program.FormatListIntoString(eatenThings));Console.cursorTop=Console.cursorTop-1|0;Forest.Program.Reply((Forest.Program.eventAndGoalExtraText[System.Array.index(128,Forest.Program.eventAndGoalExtraText)]||"")+" "+(eatenThings.getItem(0)||"")+".")}!Forest.Program.GoalCompleted.getItem(Forest.Goal.EnoughFoodConsumed)&&Forest.Program.ListOfEatenThings.Count>=4&&Forest.Program.GoalCompleted.setItem(Forest.Goal.EnoughFoodConsumed,!0)},Relax:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$task10,$task11,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11],$step);switch($step){case 0:if(Forest.Program.ThingIdsByName.add("necklace",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("dazzle",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("glow",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("something",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("thing",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("bush",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("bushes",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("reflection",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("light",Forest.ThingId.Necklace),Forest.Program.ThingIdsByName.add("jewelry",Forest.ThingId.Necklace),Forest.Program.GoalCompleted.setItem(Forest.Goal.HaveRelaxed,!0),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(136,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinueAndClear(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(137,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(138,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(139,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(2,Forest.Program.gameStory)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:if($task5.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(140,Forest.Program.eventAndGoalExtraText)]),$task6=Forest.Program.PressEnterToContinue(),$step=6,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 6:if($task6.getAwaitedResult(),Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(3,Forest.Program.gameStory)]),$task7=Forest.Program.PressEnterToContinue(),$step=7,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 7:if($task7.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(197,Forest.Program.eventAndGoalExtraText)]),$task8=Forest.Program.PressEnterToContinue(),$step=8,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 8:if($task8.getAwaitedResult(),Forest.Program.Reply(Forest.Program.gameStory[System.Array.index(4,Forest.Program.gameStory)]),$task9=Forest.Program.PressEnterToContinue(),$step=9,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 9:if($task9.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(141,Forest.Program.eventAndGoalExtraText)]),$task10=Forest.Program.PressEnterToContinue(),$step=10,$task10.isCompleted())continue;$task10.continue($asyncBody);return;case 10:if($task10.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(142,Forest.Program.eventAndGoalExtraText)]),$task11=Forest.Program.PressEnterToContinue(),$step=11,$task11.isCompleted())continue;$task11.continue($asyncBody);return;case 11:$task11.getAwaitedResult();Forest.Program.MoveThing(Forest.ThingId.Necklace,Forest.Program.ThingsCurrentLocations.getItem(Forest.ThingId.Necklace).getItem(0),Forest.Program.CurrentLocationId);Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},FindNecklace:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$task10,$task11,$task12,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12],$step);switch($step){case 0:if(Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(144,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinueAndClear(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(145,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(146,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(147,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(148,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:if($task5.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(149,Forest.Program.eventAndGoalExtraText)]),$task6=Forest.Program.PressEnterToContinue(),$step=6,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 6:if($task6.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(150,Forest.Program.eventAndGoalExtraText)]),$task7=Forest.Program.PressEnterToContinue(),$step=7,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 7:if($task7.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(151,Forest.Program.eventAndGoalExtraText)]),$task8=Forest.Program.PressEnterToContinue(),$step=8,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 8:if($task8.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(150,Forest.Program.eventAndGoalExtraText)]),$task9=Forest.Program.PressEnterToContinue(),$step=9,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 9:if($task9.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(150,Forest.Program.eventAndGoalExtraText)]),$task10=Forest.Program.PressEnterToContinue(),$step=10,$task10.isCompleted())continue;$task10.continue($asyncBody);return;case 10:if($task10.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(152,Forest.Program.eventAndGoalExtraText)]),$task11=Forest.Program.PressEnterToContinue(),$step=11,$task11.isCompleted())continue;$task11.continue($asyncBody);return;case 11:if($task11.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(153,Forest.Program.eventAndGoalExtraText)]),$task12=Forest.Program.PressEnterToContinue(),$step=12,$task12.isCompleted())continue;$task12.continue($asyncBody);return;case 12:$task12.getAwaitedResult();Forest.Program.MoveThing(Forest.ThingId.Necklace,Forest.Program.CurrentLocationId,Forest.LocationId.Inventory);Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},SleepAndDream:function(){var $step=0,$task1,$task2,$task3,$task4,$task5,$task6,$task7,$task8,$task9,$task10,$task11,$task12,$task13,$task14,$task15,$task16,$task17,$task18,$task19,$task20,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],$step);switch($step){case 0:if(Forest.Program.GoalCompleted.setItem(Forest.Goal.DreamtAboutShiftingShape,!0),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(158,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.PressEnterToContinueAndClear(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(159,Forest.Program.eventAndGoalExtraText)]),$task2=Forest.Program.PressEnterToContinue(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:if($task2.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(160,Forest.Program.eventAndGoalExtraText)]),$task3=Forest.Program.PressEnterToContinue(),$step=3,$task3.isCompleted())continue;$task3.continue($asyncBody);return;case 3:if($task3.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(161,Forest.Program.eventAndGoalExtraText)]),$task4=Forest.Program.PressEnterToContinue(),$step=4,$task4.isCompleted())continue;$task4.continue($asyncBody);return;case 4:if($task4.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(162,Forest.Program.eventAndGoalExtraText)]),$task5=Forest.Program.PressEnterToContinue(),$step=5,$task5.isCompleted())continue;$task5.continue($asyncBody);return;case 5:if($task5.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(163,Forest.Program.eventAndGoalExtraText)]),$task6=Forest.Program.PressEnterToContinue(),$step=6,$task6.isCompleted())continue;$task6.continue($asyncBody);return;case 6:if($task6.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(164,Forest.Program.eventAndGoalExtraText)]),$task7=Forest.Program.PressEnterToContinue(),$step=7,$task7.isCompleted())continue;$task7.continue($asyncBody);return;case 7:if($task7.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(165,Forest.Program.eventAndGoalExtraText)]),$task8=Forest.Program.PressEnterToContinue(),$step=8,$task8.isCompleted())continue;$task8.continue($asyncBody);return;case 8:if($task8.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(166,Forest.Program.eventAndGoalExtraText)]),$task9=Forest.Program.PressEnterToContinue(),$step=9,$task9.isCompleted())continue;$task9.continue($asyncBody);return;case 9:if($task9.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(167,Forest.Program.eventAndGoalExtraText)]),$task10=Forest.Program.PressEnterToContinue(),$step=10,$task10.isCompleted())continue;$task10.continue($asyncBody);return;case 10:if($task10.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(168,Forest.Program.eventAndGoalExtraText)]),$task11=Forest.Program.PressEnterToContinue(),$step=11,$task11.isCompleted())continue;$task11.continue($asyncBody);return;case 11:if($task11.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(169,Forest.Program.eventAndGoalExtraText)]),$task12=Forest.Program.PressEnterToContinue(),$step=12,$task12.isCompleted())continue;$task12.continue($asyncBody);return;case 12:if($task12.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(202,Forest.Program.eventAndGoalExtraText)]),$task13=Forest.Program.PressEnterToContinueAndClear(),$step=13,$task13.isCompleted())continue;$task13.continue($asyncBody);return;case 13:if($task13.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(170,Forest.Program.eventAndGoalExtraText)]),$task14=Forest.Program.PressEnterToContinue(),$step=14,$task14.isCompleted())continue;$task14.continue($asyncBody);return;case 14:if($task14.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(171,Forest.Program.eventAndGoalExtraText)]),$task15=Forest.Program.PressEnterToContinue(),$step=15,$task15.isCompleted())continue;$task15.continue($asyncBody);return;case 15:if($task15.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(173,Forest.Program.eventAndGoalExtraText)]),$task16=Forest.Program.PressEnterToContinue(),$step=16,$task16.isCompleted())continue;$task16.continue($asyncBody);return;case 16:if($task16.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(174,Forest.Program.eventAndGoalExtraText)]),$task17=Forest.Program.PressEnterToContinue(),$step=17,$task17.isCompleted())continue;$task17.continue($asyncBody);return;case 17:if($task17.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(175,Forest.Program.eventAndGoalExtraText)]),$task18=Forest.Program.PressEnterToContinue(),$step=18,$task18.isCompleted())continue;$task18.continue($asyncBody);return;case 18:if($task18.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(176,Forest.Program.eventAndGoalExtraText)]),$task19=Forest.Program.PressEnterToContinue(),$step=19,$task19.isCompleted())continue;$task19.continue($asyncBody);return;case 19:if($task19.getAwaitedResult(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(177,Forest.Program.eventAndGoalExtraText)]),$task20=Forest.Program.PressEnterToContinue(),$step=20,$task20.isCompleted())continue;$task20.continue($asyncBody);return;case 20:$task20.getAwaitedResult();Forest.Program.DisplayNewLocation();$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},MovePlayerToNewLocation:function(newLocationId){Forest.Program.CurrentLocationId=newLocationId;Forest.Program.DisplayNewLocation()},GoDownWaterSlide:function(){var $step=0,$task1,$task2,$jumpFromFinally,$tcs=new System.Threading.Tasks.TaskCompletionSource,$returnValue,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1,2],$step);switch($step){case 0:if(Console.clear(),Forest.Program.Reply(Forest.Program.eventAndGoalExtraText[System.Array.index(0,Forest.Program.eventAndGoalExtraText)]),$task1=Forest.Program.LoseLeavesWhenGoingDownWaterSlide(),$step=1,$task1.isCompleted())continue;$task1.continue($asyncBody);return;case 1:if($task1.getAwaitedResult(),$task2=Forest.Program.PressEnterToContinueAndClear(),$step=2,$task2.isCompleted())continue;$task2.continue($asyncBody);return;case 2:$task2.getAwaitedResult();Forest.Program.MovePlayerToNewLocation(Forest.LocationId.EastRiver);$tcs.setResult(null);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},LookAtLocation:function(){var currentLocationData=Forest.Program.LocationsData.getItem(Forest.Program.CurrentLocationId);Forest.Program.Print(currentLocationData.Description);Forest.Program.AddExtraDescription();Console.writeLine()},DisplayNewLocation:function(){Console.clear();Forest.Program.LookAtLocation()},AddExtraDescription:function(){var $t;Forest.Program.CurrentLocationId===Forest.LocationId.Den&&(Console.writeLine(),Forest.Program.GoalCompleted.getItem(Forest.Goal.DenCleaned)&&!Forest.Program.GoalCompleted.getItem(Forest.Goal.DenMadeCozy)?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(3,Forest.Program.eventAndGoalExtraText)]):Forest.Program.GoalCompleted.getItem(Forest.Goal.DenMadeCozy)?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(4,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(2,Forest.Program.eventAndGoalExtraText)]),Forest.Program.ThingIsHere(Forest.ThingId.Honey)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(118,Forest.Program.eventAndGoalExtraText)])));Forest.Program.NailFound||Forest.Program.CurrentLocationId!==Forest.LocationId.Waterfall?Forest.Program.NailFound&&(Forest.Program.CurrentLocationId===Forest.LocationId.Waterfall||Forest.Program.CurrentLocationId===Forest.LocationId.SouthEastForest)&&(Console.writeLine(),Forest.Program.CurrentLocationId===Forest.LocationId.Waterfall?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(69,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentLocationId===Forest.LocationId.SouthEastForest&&Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(70,Forest.Program.eventAndGoalExtraText)])):(Console.writeLine(),Forest.Program.HiddenPathFound?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(68,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(67,Forest.Program.eventAndGoalExtraText)]));Forest.Program.ThingIsHere(Forest.ThingId.Bee)?(Console.writeLine(),Forest.Program.CurrentLocationId===Forest.LocationId.BeeForest?Forest.Program.HaveThing(Forest.ThingId.Flower)&&Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(106,Forest.Program.eventAndGoalExtraText)]):Forest.Program.HaveThing(Forest.ThingId.Flower)?Forest.Program.BeeHasBeenInBeeForest?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(107,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentLocationId===($t=Forest.Program.ThingsData.getItem(Forest.ThingId.Bee).StartingLocationId)[System.Array.index(0,$t)]?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(103,Forest.Program.eventAndGoalExtraText)]):Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(104,Forest.Program.eventAndGoalExtraText)]):Forest.Program.HaveThing(Forest.ThingId.Flower)||Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(105,Forest.Program.eventAndGoalExtraText)])):Forest.Program.CurrentLocationId===Forest.LocationId.BeeForest&&Forest.Program.ThingIsHere(Forest.ThingId.Flower)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(109,Forest.Program.eventAndGoalExtraText)]));Forest.Program.CurrentLocationId===Forest.LocationId.Glade&&Forest.Program.HoneyPuzzleStarted&&!Forest.Program.HaveTriedToEatFlower&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(113,Forest.Program.eventAndGoalExtraText)]));Forest.Program.ThingIsHere(Forest.ThingId.Berries)?(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(124,Forest.Program.eventAndGoalExtraText)])):Forest.Program.ThingIsHere(Forest.ThingId.Mushrooms)?(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(125,Forest.Program.eventAndGoalExtraText)])):Forest.Program.ThingIsHere(Forest.ThingId.Nuts)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(126,Forest.Program.eventAndGoalExtraText)]));Forest.Program.ThingIsHere(Forest.ThingId.Necklace)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(143,Forest.Program.eventAndGoalExtraText)]));Forest.Program.CurrentLocationId===Forest.LocationId.Cliffs&&(Console.writeLine(),Forest.Program.CurrentShape===Forest.ThingId.ShapeBear?Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(193,Forest.Program.eventAndGoalExtraText)]):Forest.Program.CurrentShape===Forest.ThingId.ShapeSquirrel&&Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(194,Forest.Program.eventAndGoalExtraText)]));Forest.Program.GoalCompleted.getItem(Forest.Goal.TimeToRelax)&&!Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)&&(Forest.Program.GoalCompleted.getItem(Forest.Goal.HaveRelaxed)||Forest.Program.CurrentLocationId===Forest.LocationId.SouthEastForest?Forest.Program.GoalCompleted.getItem(Forest.Goal.HaveRelaxed)&&!Forest.Program.HaveThing(Forest.ThingId.Necklace)&&Forest.Program.CurrentLocationId!==Forest.LocationId.SouthEastForest?(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(200,Forest.Program.eventAndGoalExtraText)])):!Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)&&Forest.Program.HaveThing(Forest.ThingId.Necklace)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(196,Forest.Program.eventAndGoalExtraText)])):(Console.writeLine(),Forest.Program.Print(Forest.Program.eventAndGoalExtraText[System.Array.index(120,Forest.Program.eventAndGoalExtraText)])));Forest.Program.GoalCompleted.getItem(Forest.Goal.DreamtAboutShiftingShape)&&(Console.writeLine(),Forest.Program.Print(Forest.Program.ThingsData.getItem(Forest.Program.CurrentShape).Description))},InsertKeyWordAndDisplay:function(sentence,keyWords){var $t,$t1,$t2,newSentence="",split=0,word;$t=Bridge.getEnumerator(keyWords);try{while($t.moveNext())word=$t.Current,newSentence=(newSentence||"")+(($t1=System.String.split(sentence,[64].map(function(i){return String.fromCharCode(i)})))[System.Array.index(split,$t1)]||"")+(word||""),split=split+1|0}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}newSentence=(newSentence||"")+(($t2=System.String.split(sentence,[64].map(function(i){return String.fromCharCode(i)})))[System.Array.index(split,$t2)]||"");Forest.Program.Reply(newSentence)},FormatListIntoString:function(things){if(things.Count>1&&(things.add((things.getItem(things.Count-2|0)||"")+(Forest.Program.eventAndGoalExtraText[System.Array.index(50,Forest.Program.eventAndGoalExtraText)]||"")+(things.getItem(things.Count-1|0)||"")),things.RemoveRange(things.Count-3|0,2),things.Count>1)){var joinList=Bridge.toArray(things).join(", ");things.clear();things.add(joinList)}return things.getItem(0).toLowerCase()},ThingAt:function(thingId,locationId){return Forest.Program.ThingsCurrentLocations.getItem(thingId).contains(locationId)},ThingIsHere:function(thingId){return Forest.Program.ThingAt(thingId,Forest.Program.CurrentLocationId)},ThingIsAvailable:function(thingId){return Forest.Program.ThingIsHere(thingId)||Forest.Program.HaveThing(thingId)},HaveThing:function(thingId){return Forest.Program.ThingAt(thingId,Forest.LocationId.Inventory)},CanGetThing:function(thingId){return Forest.Program.ThingsYouCanGet.contains(thingId)},ThingIsNpc:function(thingId){return System.Array.contains(Forest.Program.ThingsThatAreNpcs,thingId,Forest.ThingId)},MoveThing:function(thingId,fromLocation,toLocation){Forest.Program.ThingsCurrentLocations.getItem(thingId).remove(fromLocation);Forest.Program.ThingsCurrentLocations.getItem(thingId).add(toLocation)},GetOneAndDropOneThing:function(thing1Id,thing2Id){var thingInInventory=Forest.Program.ThingsCurrentLocations.getItem(thing1Id).contains(Forest.LocationId.Inventory)?thing1Id:thing2Id,thingNotInInventory=thingInInventory===thing1Id?thing2Id:thing1Id;Forest.Program.DropThing(thingInInventory);Forest.Program.GetThing(thingNotInInventory)},GetOneAndLoseOneThing:function(thing1Id,thing2Id){var thingInInventory=Forest.Program.ThingsCurrentLocations.getItem(thing1Id).contains(Forest.LocationId.Inventory)?thing1Id:thing2Id,thingNotInInventory=thingInInventory===thing1Id?thing2Id:thing1Id;Forest.Program.LoseThing(thingInInventory);Forest.Program.GetThing(thingNotInInventory)},GetThing:function(thingId){Forest.Program.ThingsCurrentLocations.getItem(thingId).add(Forest.LocationId.Inventory)},DropThing:function(thingId){Forest.Program.LoseThing(thingId);Forest.Program.AddThingToLocation(thingId)},LoseThing:function(thingId){Forest.Program.ThingsCurrentLocations.getItem(thingId).remove(Forest.LocationId.Inventory)},AddThingToLocation:function(thingId){Forest.Program.ThingsCurrentLocations.getItem(thingId).add(Forest.Program.CurrentLocationId)},RemoveThingFromLocation:function(thingId){Forest.Program.ThingsCurrentLocations.getItem(thingId).remove(Forest.Program.CurrentLocationId)},AllGoalsCompleted:function(){return System.Linq.Enumerable.from(Forest.Program.GoalCompleted,System.Collections.Generic.KeyValuePair$2(Forest.Goal,System.Boolean)).all(function(goal){return goal.value})},ParseData:function(fileData){for(var directionAndDestinationPattern,directionAndDestination,direction,destination,answer,locationId,locationEntry,location,thingStartingLocationId,thingEntry,$t,$t1,$t2,$t3,$t4,newParsedDataObject=!0,parsedDataEntry=new Forest.ParsedData,locationIdsAsStrings=System.Enum.getNames(Forest.LocationId),thingNames=System.Enum.getNames(Forest.ThingId),line=0;line<fileData.length;line=line+1|0){newParsedDataObject&&(parsedDataEntry=new Forest.ParsedData,parsedDataEntry.Directions=new(System.Collections.Generic.Dictionary$2(Forest.Direction,Forest.LocationId).ctor),newParsedDataObject=!1);var match=System.Text.RegularExpressions.Regex.match(fileData[System.Array.index(line,fileData)],"^[0-9]*([A-Z].*): *[0-9]*(.*)"),property=match.getGroups().get(1).getValue(),value=match.getGroups().get(2).getValue();switch(property){case"Notes":line=fileData.length;break;case"ID":parsedDataEntry.Id=value;break;case"Name":parsedDataEntry.Name=value;break;case"Description":parsedDataEntry.Description=value;break;case"Directions":do{if(directionAndDestinationPattern="[ \\t]*([A-Z]\\w*): [0-9]+(\\w*)",directionAndDestination=System.Text.RegularExpressions.Regex.match(fileData[System.Array.index(line+1|0,fileData)],directionAndDestinationPattern),!System.Text.RegularExpressions.Regex.isMatch(fileData[System.Array.index(line+1|0,fileData)],directionAndDestinationPattern))break;direction=Forest.Program.EnumParse(Forest.Direction,directionAndDestination.getGroups().get(1).getValue());destination=Forest.Program.EnumParse(Forest.LocationId,directionAndDestination.getGroups().get(2).getValue());parsedDataEntry.Directions.setItem(direction,destination);line=line+1|0}while((line+1|0)<fileData.length);break;case"Answers":var listOfAnswers=new(System.Collections.Generic.List$1(System.String).ctor),lines=0,numberOfAnswers=9,answerPattern="[ \\t]*.*: *(.*)";do answer=System.Text.RegularExpressions.Regex.match(fileData[System.Array.index((line+lines|0)+1|0,fileData)],answerPattern).getGroups().get(1).getValue(),(System.Linq.Enumerable.from(answer,System.Char).contains(60)||System.Linq.Enumerable.from(answer,System.Char).contains(62))&&(answer=""),Bridge.referenceEquals(answer,"")?listOfAnswers.add((System.String.trimStart(($t=System.String.split(Forest.Program.defaultAnswersToGetInteractions[System.Array.index(lines,Forest.Program.defaultAnswersToGetInteractions)],[58,64].map(function(i){return String.fromCharCode(i)})))[System.Array.index(1,$t)])||"")+(parsedDataEntry.Name.toLowerCase()||"")+(($t1=System.String.split(Forest.Program.defaultAnswersToGetInteractions[System.Array.index(lines,Forest.Program.defaultAnswersToGetInteractions)],[64].map(function(i){return String.fromCharCode(i)})))[System.Array.index(1,$t1)]||"")):listOfAnswers.add(answer),lines=lines+1|0;while(lines<numberOfAnswers);line=line+numberOfAnswers|0;parsedDataEntry.Answers=($t2=System.String,System.Linq.Enumerable.from(listOfAnswers,$t2).ToArray($t2));break;case"Starting location":parsedDataEntry.StartingLocationId=value;break;case"":if(System.Array.contains(locationIdsAsStrings,parsedDataEntry.Id,System.String)&&(locationId=Forest.Program.EnumParse(Forest.LocationId,parsedDataEntry.Id),locationEntry=($t3=new Forest.LocationData,$t3.Id=locationId,$t3.Name=parsedDataEntry.Name,$t3.Description=parsedDataEntry.Description,$t3.Directions=parsedDataEntry.Directions,$t3),Forest.Program.LocationsData.setItem(locationId,locationEntry)),System.Array.contains(thingNames,parsedDataEntry.Id,System.String)){var thingId=Forest.Program.EnumParse(Forest.ThingId,parsedDataEntry.Id),startingLocationsStrings=new(System.Collections.Generic.List$1(System.String).$ctor1)(System.String.split(parsedDataEntry.StartingLocationId,[44].map(function(i){return String.fromCharCode(i)}))),startingLocationsIds=new(System.Collections.Generic.List$1(Forest.LocationId).ctor);for(location=0;location<startingLocationsStrings.Count;location=location+1|0)location===0?startingLocationsIds.add(Forest.Program.EnumParse(Forest.LocationId,startingLocationsStrings.getItem(location).trim())):startingLocationsIds.add(Forest.Program.EnumParse(Forest.LocationId,Forest.Program.RemoveDigits(startingLocationsStrings.getItem(location).trim())));thingStartingLocationId=($t3=Forest.LocationId,System.Linq.Enumerable.from(startingLocationsIds,$t3).ToArray($t3));thingEntry=($t4=new Forest.ThingData,$t4.Id=thingId,$t4.Name=parsedDataEntry.Name,$t4.Description=parsedDataEntry.Description,$t4.Answers=parsedDataEntry.Answers,$t4.StartingLocationId=thingStartingLocationId,$t4);Forest.Program.ThingsData.setItem(thingId,thingEntry)}newParsedDataObject=!0;break}}},RemoveEmptyLines:function(arrayWithText){for(var $t,$t1,listOfText=new(System.Collections.Generic.List$1(System.String).$ctor1)(($t=System.String,System.Linq.Enumerable.from(arrayWithText,$t).toList($t))),line=0;line<listOfText.Count;line=line+1|0)Bridge.referenceEquals(listOfText.getItem(line),"")&&(listOfText.removeAt(line),line=line-1|0);return $t1=System.String,System.Linq.Enumerable.from(listOfText,$t1).ToArray($t1)},RemoveDigits:function(textWithDigits){var text=System.String.remove(textWithDigits,0,1);return System.Text.RegularExpressions.Regex.isMatch(String.fromCharCode(text.charCodeAt(0)),"\\d")&&(text=Forest.Program.RemoveDigits(text)),text},RemoveEmptyLinesAndDigits:function(arrayWithText){var $t,processedText=Forest.Program.RemoveEmptyLines(arrayWithText),lineIndex=0,line;$t=Bridge.getEnumerator(processedText);try{while($t.moveNext())line=$t.Current,System.Text.RegularExpressions.Regex.isMatch(String.fromCharCode(line.charCodeAt(0)),"\\d")&&(processedText[System.Array.index(lineIndex,processedText)]=Forest.Program.RemoveDigits(line)),lineIndex=lineIndex+1|0}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}return processedText},InitializeThingsLocations:function(){var $t,$t1,thingEntry,location;$t=Bridge.getEnumerator(Forest.Program.ThingsData);try{while($t.moveNext()){thingEntry=$t.Current;$t1=Bridge.getEnumerator(thingEntry.value.StartingLocationId);try{while($t1.moveNext())location=$t1.Current,Forest.Program.ThingsCurrentLocations.containsKey(thingEntry.key)?Forest.Program.ThingsCurrentLocations.getItem(thingEntry.key).add(location):(Forest.Program.ThingsCurrentLocations.add(thingEntry.key,new(System.Collections.Generic.List$1(Forest.LocationId).ctor)),Forest.Program.ThingsCurrentLocations.getItem(thingEntry.key).add(location))}finally{Bridge.is($t1,System.IDisposable)&&$t1.System$IDisposable$Dispose()}}}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}}});Bridge.define("Forest.ThingData",{fields:{Id:0,Name:null,Description:null,Answers:null,StartingLocationId:null}});Bridge.define("Forest.ThingId",{$kind:"enum",statics:{fields:{Moss:0,Grass:1,OldLeaves:2,OkLeaves:3,SoftLeaves:4,PileOfLeaves:5,Berries:6,Nuts:7,Mushrooms:8,Flower:9,Flowers:10,Bee:11,Bees:12,Honey:13,Fish:14,OldStick:15,LongStick:16,Rope:17,Trash:18,Notes:19,Binoculars:20,Nail:21,FishingRodLong:22,FishingRodOld:23,Necklace:24,Owl:25,Frog:26,Dirt:27,Placeholder:28,ShapeBear:29,ShapeSquirrel:30}}})});